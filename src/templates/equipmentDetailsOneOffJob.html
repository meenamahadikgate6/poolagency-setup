<div>
  <div class="white-bg p-t20 p-b20 p-lr20 m-t20 equipment-section " style="min-height: 232px;{{selectedWaterBody && selectedWaterBody.color ? 'border:3px solid '
  +selectedWaterBody.color : ''}}">
  <div class="spinner" ng-if="hasTrueValue()" style="border: 0;">
    <div class="spinner-item">
      <div class="spinner-animation"><img border="0" src="resources/images/spinner.gif" /></div>
    </div>
  </div>
    <div class="grid" style="overflow: inherit;">
      <success ng-if="eqScheduleMsg" message="{{eqScheduleMsg}}"></success>
      <error ng-if="eqScheduleError" message="{{eqScheduleError}}"></error>
      <ul class="e-icon-warpper equipment-area {{ equipmentExpandible && equipmentExpanded ? 'equipment-area-expanded' : '' }}">
        <li ng-repeat="equipment in equipments track by $index" ng-show="((equipmentExpandible && equipmentExpanded) || $index < maxEquipmentToShow)" class="{{ $index < maxEquipmentToShow ? '' : 'not-top-row'}}">       
          <a href="javascript:void(0)" ng-click="equipment.isRouteActive ? showEquipmentDetail(equipment.eqId) : ''" class="e-icon e-{{equipment.icon}} status{{equipment.detail.isPresent}} type{{equipment.selectedType.typeId}}">
            <div class="e-tooltip e-tooltip-aligned">
              <strong>{{equipment.label}}</strong> 
              <div>
                {{(equipment.eqId == 8 ? ('') : (equipment.selectedType.eqType != 'None' ? equipment.selectedType.eqType : '' ))}} 
                {{(equipment.eqId == 8 ? ('') : (equipment.detail.isPresent == 0 ? 'No '+equipment.label : ''))}} 
                {{(equipment.eqId == 8 ? (equipment.detail.isPresent ? 'Device linked' : 'Device not linked') : ((equipment.detail.isPresent == undefined || !equipment.selectedType.typeId) ? 'Unknown' : ''))}}</div>              
              <div ng-if="equipment.detail.timerValue && equipment.detail.typeId != 19">Total run time {{equipment.detail.timerValue}} hour{{equipment.detail.timerValue == 1 ? '' : 's' }}</div>
              <div ng-if="lastBackWashedDate.length > 0 && equipment.eqId == 1" ng-hide="lastBackWashedDate[0].isDeleted">Last Backwashed {{lastBackWashedDate[0].createTime | date: 'MM/dd/yyyy'}}</div>
              <div ng-if="lastFilterCleanedDate.length > 0 && equipment.eqId == 1" ng-hide="lastFilterCleanedDate[0].isDeleted">Last Cleaned {{lastFilterCleanedDate[0].createTime | date: 'MM/dd/yyyy'}}</div>    
              <div ng-if="saltCleanedHistoryDate.length > 0 && equipment.eqId == 6" ng-hide="saltCleanedHistoryDate[0].isDeleted">Last Cleaned {{saltCleanedHistoryDate[0].createTime | date: 'MM/dd/yyyy'}}</div>            
              <div ng-if="waterLevelLowHistoryDate.length > 0 && equipment.eqId == 5" ng-hide="waterLevelLowHistoryDate[0].isDeleted">Last Low {{waterLevelLowHistoryDate[0].createTime | date: 'MM/dd/yyyy'}}</div>      
            </div>
          </a>
          <span ng-if="equipment.eqId != 8" ng-click="equipment.isRouteActive ? showEquipmentDetail(equipment.eqId) : ''" class="item-label">{{(equipment.selectedType.eqType != 'None' ? (equipment.selectedType.eqType == 'Commercial pool running 24/7' ? 'Running 24/7' :  equipment.selectedType.eqType ) : '' )}}</span>
          <span ng-if="equipment.detail.isPresent && equipment.eqId == 8" ng-click="showEquipmentDetail(equipment.eqId)" class="item-label">{{equipment.label}}</span>
          <span ng-click="!editFilterLocalisOpening && editFilterLocal(equipment)" class="schedule-switch" ng-if="(equipment.eqId == 1 && equipment.detail && (equipment.detail.typeId == 2 || equipment.detail.typeId == 3)) || (equipment.eqId == 6 && equipment.detail && equipment.detail.typeId == 18)">Schedule <label class="switch small" ><span id ="toggle_{{equipment.detail.id}}" ng-class="equipment.detail.isSchedule ? 'slider round active' : 'slider round'" class="slider round"></span></label></span>
        </li>  
      </ul>
      <span ng-if="equipmentExpandible" ng-click="toggleEquipmentArea()" class="view-more-equipments-btn">view {{ equipmentExpanded ? 'less' : 'more' }}</span>
    </div>
  </div> 
  <script type="text/ng-template" id="equipmentDetails.html">
    <div class="dataTables_wrapper modal-box equipment-detail-popup">  
      <div ng-if="isApiProcessing" class="transparent-bg-fixed"></div>
      <div class="spinner" ng-if="isProcessing" style="border:none; position: fixed;">
        <div class="spinner-item">
          <div class="spinner-animation"><img border="0" src="resources/images/spinner.gif" /></div>
        </div>
      </div>
        <form class="set-chem-form" name="equipmentForm" ng-submit="equipmentForm.$valid  ? confirmBeforeSave(selectedEquipment[0].eqId) : focusOnInvalidInput(equipmentForm.$valid)" novalidate>

          <div class="popup-header"><span class="heading">{{selectedEquipment[0].label}}</span>
      <div class="popup-close" ng-click="closeThisDialog('')"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
    </div>
    <div class="" style="position:absolute; width: 100%; z-index: 1; margin-top: -24px;">
     
    <success ng-if="successMsg && !crossClicked" message="{{successMsg}}"></success>
    <error ng-if="error" message="{{error}}"></error>
    </div>
      <div class="detail-box" id="scrollarea">
        <div class="grid text-left">
          <div class="col-12-12 p-0">
              <a href="javascript:void(0)" ng-if="model.typeId || model.notes || photos.length > 0 || (selectedEquipment[0].eqId == 8 && selectedEquipment[0].detail.podDetails)" ng-click="eraseDataConfirm()" class="delete-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="15" height="17" viewBox="0 0 15 17">
                    <path fill="#34495E" fill-rule="evenodd" d="M11.816 15.622l.665-11.747H2.356l.67 11.706 8.79.041zM7.418 2.04c-.441 0-.848.18-1.155.475h2.309a1.672 1.672 0 0 0-1.154-.475zm6.766.475c.36 0 .652.304.652.68 0 .375-.291.68-.652.68h-.398v.001l-.675 11.787c-.045.741-.614 1.319-1.295 1.319H3.022c-.685 0-1.255-.58-1.298-1.32L1.05 3.877l.001-.001H.652A.666.666 0 0 1 0 3.195c0-.376.292-.68.652-.68h4.032C5.169 1.423 6.225.68 7.419.68c1.192 0 2.248.743 2.733 1.835h4.033zm-9.24 11.97a.664.664 0 0 1-.651-.641L3.86 5.74a.67.67 0 0 1 .614-.716c.357-.026.667.266.687.64l.435 8.104c.02.375-.255.696-.615.717h-.037zm4.91 0a.67.67 0 0 1-.615-.717l.435-8.103c.02-.375.335-.669.686-.642a.67.67 0 0 1 .615.718l-.434 8.103a.664.664 0 0 1-.65.641h-.037zm-2.437 0a.666.666 0 0 1-.652-.68V5.703c0-.375.292-.68.652-.68.361 0 .653.305.653.68v8.104c0 .375-.292.68-.653.68z"></path>
                  </svg>
                </a>
                <div class="row">
                  <div class="col-md-5" ng-if="selectedEquipment[0].eqId != 8">                    
                    <div class="formGroup">
                      <div class="main-title">{{(selectedEquipment[0].eqId == 3 ? 'Timer ' : '')}}Type</div>
                      <div ng-repeat="etype in selectedEquipment[0].eqType track by $index" class="radio-default2">
                        <ng-container ng-if="etype.eqType == 'None'">
                            <label for="type{{etype.typeId}}" >
                                {{etype.eqType}}
                              <input type="radio" name="etype" id="type{{etype.typeId}}" value="{{etype.typeId}}" ng-model="model.typeId" ng-click="onChangeRadio($event, selectedEquipment[0].eqId);" ng-checked="selectedEquipment[0].selectedType.typeId == etype.typeId"/>
                              <span></span>
                            </label>
    
                        </ng-container>                     
                      </div>
                      <div ng-repeat="etype in selectedEquipment[0].eqType track by $index" class="radio-default2">
                        <ng-container ng-if="etype.eqType != 'None'">
                          <label for="type{{etype.typeId}}" >
                              {{etype.eqType}} 
                            <input type="radio" name="etype" id="type{{etype.typeId}}" value="{{etype.typeId}}" ng-model="model.typeId" ng-click="onChangeRadio($event, selectedEquipment[0].eqId, etype);" ng-checked="selectedEquipment[0].selectedType.typeId == etype.typeId"/>
                            <span></span>
                          </label>        
                        </ng-container>
                      </div>                        
                    </div>  
                  </div>
                  <div class="col-md-5" ng-if="selectedEquipment[0].eqId == 8">
                    <div class="formGroup">
                      <ng-container ng-if="!selectedEquipment[0].detail.podDetails">
                        <div class="pod-id-form">
                          <button type="button" ng-if="!isPodIdInputShowing" class="add-button button blue-bg sm-btn" ng-click="togglePodInput('show')">LINK DEVICE</button>
                          <div class="pod-id-input" ng-if="isPodIdInputShowing">
                            <input ng-disabled="isPodIdAdding" id="podIdInput" type="text" maxlength="10" class="form-control" placeholder="Enter POD ID" ng-blur="savePodId(selectedEquipment[0].eqId, model)">                          
                            <span ng-if="!isPodIdAdding" class="action-pod-id cancel-pod-id" ng-click="togglePodInput('hide')"><i class="fa fa-times"></i></span>
                            <span ng-if="isPodIdAdding" class="action-pod-id loader-pod-id"></span>
                          </div>
                        </div>
                      </ng-container>                      
                      <ng-container ng-if="selectedEquipment[0].detail.podDetails">
                        <div class="pod-detail-container {{ isPodIdRemoving ? 'removing' : '' }}">                          
                          <div class="pod-device-id">                        
                            <span class="id-wrapper" title="{{selectedEquipment[0].detail.podDetails.podId}}">
                              <strong>Pod ID: </strong>
                              <span>{{selectedEquipment[0].detail.podDetails.podId}}</span>  
                            </span>
                            <span ng-if="!isPodIdRemoving" class="unlink-pod-id-icon" ng-click="openUnlinkModal(selectedEquipment[0].eqId, model, selectedEquipment[0].detail.podDetails.podId)"><i class="fa fa-times"></i></span>
                            <span ng-if="isPodIdRemoving" class="unlink-pod-id-loader"></span>
                          </div>
                          <div class="pod-device-battery-count">  
                            <span class="icon-holder"><i class="fa fa-rotate-270 fa-battery-{{getRangeValue(selectedEquipment[0].details.podDetails.batteryPercentage || 0)}}"></i></span>
                            <span class="text-holder"><span ng-bind-html="getPadBatteryCount(selectedEquipment[0].detail.podDetails.batteryPercentage, '%')"></span> battery</span>
                          </div>
                          <div class="pod-device-pad-count">  
                            <span class="icon-holder"><i class="fa fa-database"></i></span>
                            <span class="text-holder"><span ng-bind-html="getPadBatteryCount(selectedEquipment[0].detail.podDetails.testingPads, '')"></span> testing days remaining</span>
                          </div>
                        </div>
                      </ng-container>                      
                    </div>
                  </div>
                  <div class="col-md-7">
                      <div class="formGroup">
                          <div class="main-title">Notes </div>
                          <textarea class="form-control minH-100" ng-model="model.notes" ng-blur="saveNotes(selectedEquipment[0].eqId)" >{{selectedEquipment[0].detail.notes}}</textarea>
                        </div>  

                  </div>
                </div>
                <!--Common log date popup Start-->
                <div ng-show="logBox.status" class="quick-popup last-dates-popup log-popup">  
                  <div class="popup-header">
                    <span class="heading">Log {{logBox.type == 'Backwashed' ? 'Backwash' : ''}} {{logBox.type == 'Cleaned Filter' ? 'Filter Clean' : ''}} {{logBox.type == 'Cleaned Salt Cell' ? 'Salt Cell Cleaning' : ''}} </span> 
                    <div class="popup-close" ng-click="logBox.status=!logBox.status"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
                  </div>
                  <div class="p-tb10 p-lr10"> 
                    <div class="text-center p-14x">
                    Select date {{logBox.type == 'Backwashed' ? 'filter was backwashed' : ''}} {{logBox.type == 'Cleaned Filter' ? 'filter was cleaned' : ''}} {{logBox.type == 'Cleaned Salt Cell' ? 'cell was cleaned' : ''}} <br>
                    (if it wasn't done in app)
                    </div>
                    <div>
                      <!--input ng-model="model.endDate"  class="datepicker-custom-input" ng-change="chooseDate(model.endDate); saveCheckListTrigger()" readonly/--> 
                      <div class="datepicker-custom-inline log-date"></div>                                 
                      <div class="text-center"><button type="button" ng-disabled="!logBox.model" class="add-button button blue-bg sm-btn m-t10" ng-click="saveLog(logBox.type)">Save</button></div>
                    </div>                                        
                  </div>                             
                </div> 
                <!--Common log date popup End-->
                <!--Backwashed Start-->
                <div class="formGroup process-wrapper" ng-if="selectedEquipment[0].eqId == 1 && showBackwash && model.backwashOn">                     
                  <div class="main-title">Backwash</div>
                  <div class="grey-box" style="{{['1','3'].indexOf(model.typeId.toString()) == -1 ? 'position:relative':''}}">
                    <!--div class="validation-overlay" ng-hide="['1','3'].indexOf(model.typeId.toString()) > -1" ng-click="openTypeValidation()"></div-->
                    <!--toggleIcons Start--> 
                    <div class="row">
                      <div class="col-xs-12">
                        <div class="inner-title-filter inner-title-filter-first bold-title">
                          <span>Process shown in technician app</span>
                          <a href="javascript:void(0)" class="icon-required" style="margin-left: 5px;">
                            <i class="fa fa-question-circle" aria-hidden="true"></i>
                            <span class="sch-help">When Backwash button is used in app, this is the process the technician must complete. You can add start/end instructions and make pictures optional or required</span>
                          </a>
                        </div>
                      </div>
                    </div>
                    <ul >
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('backwashData', 'instructionsBefore')" ng-class="{'active':backwashData.instructionsBefore}"><i class="fa fa-list-alt" aria-hidden="true"></i><div>Instructions (start)</div></a></li>
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('backwashData', 'Backwash')" ng-class="{'active':Backwash}"><i class="fa fa-camera" aria-hidden="true"></i><div>Backwash Pictures</div></a></li>
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('backwashData', 'closeBackwashValve')" ng-class="{'active':closeBackwashValve}"><i class="fa fa-camera" aria-hidden="true"></i><div>Valve Closed Pictures</div></a></li>
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('backwashData', 'instructionsAfter')" ng-class="{'active':backwashData.instructionsAfter}"><i class="fa fa-list-alt" aria-hidden="true"></i><div>Instructions (end)</div></a></li>
                    </ul> 
                    <hr  ng-if="model.backwashData.instStartData || model.backwashData.instEndData" class="m-b0 m-t0" />
                    <div class="instructions-box h-0-5x">
                      <div ng-if="model.backwashData.instStartData">
                        <strong>Instructions Before:</strong> 
                        <span ng-if="!showAllInstStartData"> {{ model.backwashData.instStartData | limitTo: 70 }}</span>                      
                        <span ng-if="showAllInstStartData"> {{model.backwashData.instStartData}}</span>
                        <span ng-show="model.backwashData.instStartData.length > 70 && !showAllInstStartData">... <a href="javascript:void(0)" ng-click="showAllInstStartData = true">more</a></span>
                        <span ng-show="showAllInstStartData"> <a href="javascript:void(0)" ng-click="showAllInstStartData = false">less</a></span>                  
                      </div>
                      <div ng-if="model.backwashData.instEndData">                     
                        <strong>Instructions After:</strong> 
                        <span ng-if="!showAllInstEndData"> {{ model.backwashData.instEndData | limitTo: 70 }}</span>                      
                        <span ng-if="showAllInstEndData"> {{model.backwashData.instEndData}}</span>
                        <span ng-show="model.backwashData.instEndData.length > 70 && !showAllInstEndData">... <a href="javascript:void(0)" ng-click="showAllInstEndData = true">more</a></span>
                        <span ng-show="showAllInstEndData"> <a href="javascript:void(0)" ng-click="showAllInstEndData = false">less</a></span>                        
                      </div>                      
                    </div>
                    <!--toggleIcons End--> 
                    <!--inline-radio-button Start-->
                    <div class="row">
                      <div class="col-xs-12">
                        <div class="inner-title-filter">
                          <span>Require techs to backwash filter on a route stop</span>
                          <a href="javascript:void(0)" class="icon-required" style="margin-left: 5px;">
                            <i class="fa fa-question-circle" aria-hidden="true"></i>
                            <span class="sch-help">Choose how often you want the app to require backwashing the filter at this property. If you choose "every 4 visits", the tech can still backwash anytime they want, but if the filter doesn't get backwashed after 3 visits in a row, the app will require them to do it on the 4th visit.</span>
                          </a>
                        </div>
                      </div>
                    </div>             
                    <div class="formGroup inline-radio-button inline-radio-button-aligned">                       
                      <div class="radio-default2">                           
                        <label for="backwashRequired1" >
                          Never
                          <input type="radio" name="backwashRequired" id="backwashRequired1" value="1" ng-model="model.backwashData.required"  ng-checked="model.backwashData.required == '1'"  ng-change="setRequired('backwashData')"/>
                          <span></span>
                        </label>
                      </div>   
                      <div class="radio-default2">                           
                        <label for="backwashRequired2" >
                          Always
                          <input type="radio" name="backwashRequired" id="backwashRequired2" value="2" ng-model="model.backwashData.required"  ng-checked="model.backwashData.required == '2'" ng-change="setRequired('backwashData')" />
                          <span></span>
                        </label>
                      </div>                 
                      <div class="radio-default2 equipment-filter-visit-counter">                           
                        <label for="backwashRequired3" >
                          Every <input ng-change="updateEditedCounter('backwashData')" type="number" class="input-under-radio" name="backwashDataWeeks" id="backwashDataWeeks" ng-model="model.backwashData.visits" maxlength="2" ng-min="1" oninput="this.value=this.value.slice(0,this.maxLength)" ng-blur="model.backwashData.required == '3' && saveDetails('backwashData')"   /> visit(s)
                          <input type="radio" name="backwashRequired" id="backwashRequired3" value="3" ng-model="model.backwashData.required"  ng-checked="model.backwashData.required == '3'" ng-change="setRequired('backwashData')" />
                          <span></span>
                        </label>
                        <div ng-if="model.backwashData.required == 3 && model.backwashData.counter>=0 && (model.backwashData.visits && model.backwashData.visits > 0)" class="equipment-filter-visit-counter-msg">
                          <div ng-if="!isBackwashDataCounterUpdated && model.backwashData.counter>0">required in {{model.backwashData.counter}} more visits</div>
                          <div ng-if="isBackwashDataCounterUpdated && model.backwashData.visits>1">required in {{model.backwashData.visits}} more visits</div>
                          <div ng-if="(!isBackwashDataCounterUpdated && model.backwashData.counter==0) || (isBackwashDataCounterUpdated && model.backwashData.visits == 1)">required on next visit</div>
                        </div>
                      </div>                                                             
                    </div>  
                    <!--inline-radio-button End-->
                    <!--history-box Start-->
                    <div class="history-box history-box-aligned">
                      <div class="m-b10 p-relative">                      
                        <div class="icon-required icon-required-log-cleaning" ng-class="{ 'show-tooltip' : model.typeId == '' }">                          
                          <div class="pointer" ng-click="model.typeId != '' ? openLogDatePopup('Backwashed') : null">Log Backwash <i class="fa fa-calendar-plus-o light-blue"></i></div>
                          <span class="sch-help">You must select a filter type to log backwash date</span>
                        </div>
                      </div>                          
                      <div ng-if="lastBackWashedDate.length > 0" ng-hide="lastBackWashedDate[0].isDeleted">Last Backwash {{lastBackWashedDate[0].createTime | date: 'MM/dd/yyyy'}}</div>
                      <div class="m-b10 p-relative" ng-show="lastBackWashedDate.length > 0">                         
                        <div class="pointer" ng-click="openLastDatePopup('lastBackWashedDatesPopup');">History <i class="fa fa-history light-blue"   ></i></div>
                        <div ng-if="lastBackWashedDatesPopup" class="quick-popup last-dates-popup">  
                          <div class="popup-header popup-header-log">
                            <span class="heading">Last Backwash</span>                      
                            <div class="popup-close" ng-click="closeLastDatePopup('lastBackWashedDatesPopup')">
                              <i class="fa fa-times-circle" aria-hidden="true"></i>
                            </div>
                          </div>
                          <div class="p-tb10 p-lr10 scrollable-box" style="overflow-y: unset;"> 
                            <div class="row">
                              <div class="col-sm-6" ng-repeat="date in lastBackWashedDateTen track by $index" style="display: flex;" ng-class="date.isDeleted ? 'deleted' : ''" ng-if="$index < 28">
                                <a href="#" ng-if="date.isDeleted" class="icon-required" style="text-decoration: none;width: 75%; position: absolute; height: 24px; cursor: inherit;"><span class="sch-help awesome-tooltip">Deleted by {{date.userName}} on {{date.deletedOn | date: 'MM/dd/yyyy' }} at {{date.deletedOn | date:'h:mm a'}}</span></a><i class="fa fa-clock-o light-blue" aria-hidden="true" style="padding: 4px 2px 0 0;"></i> {{date.createTime | date: 'MM/dd/yyyy'}}
                                <a class="delete" href="javascript:void(0)" ng-show="!data.isSystem" ng-click="cleanHistoryDeleteConfirm(date, $index)" ng-hide="date.isDeleted"><i class="fa fa-times"></i></a>
                              </div>
                            </div>                                        
                          </div>
                          <div class="text-center see-more-date">
                            <span ng-if="lastBackWashedDateTenSeeMore" ng-click="seeMoreDates('lastBackWashedDateTen')">See More</span>
                          </div>
                        </div> 
                      </div>                         
                    </div>                                        
                    <!--history-box End--> 
                    <!--quick-popup before After Start-->
                    <div ng-if="backwashData.instructionsBeforePopup" class="quick-popup before">  
                      <div class="popup-header"><span class="heading">Instructions Before</span>                        
                      </div>
                      <div class="p-tb10 p-lr10">
                        <textarea  class="form-control minH-100" ng-model="model.backwashData.instStartData" name="instStartData">{{model.backwashData.instStartData}}</textarea>
                        <div class="m-t10 text-center"><button class="add-button button blue-bg sm-btn" type="button" ng-click="saveDetails('backwashData', 'instructionsBefore')" >Save</button></div>
                      </div>
                    </div>   
                    <div ng-if="backwashData.instructionsAfterPopup" class="quick-popup after">  
                      <div class="popup-header"><span class="heading">Instructions After</span>                          
                      </div>
                      <div class="p-tb10 p-lr10">
                        <textarea  class="form-control minH-100" ng-model="model.backwashData.instEndData" name="instEndData">{{model.backwashData.instEndData}}</textarea>
                        <div class="m-t10 text-center"><button class="add-button button blue-bg sm-btn"  type="button" ng-click="saveDetails('backwashData', 'instructionsAfter')" >Save</button></div>
                      </div>
                    </div>   
                    <!--quick-popup before After End-->
                  </div>
                </div>
                <!--Backwashed End-->

                <!--Filtered Cleaned Start-->
                <div class="formGroup process-wrapper" ng-if="selectedEquipment[0].eqId == 1 && showCleanedFilter">                     
                  <div class="main-title">Filter Clean</div>
                  <div class="grey-box" style="{{['2','3'].indexOf(model.typeId.toString()) == -1 ? 'position:relative':''}}">
                    <!--div class="validation-overlay" ng-hide="['2','3'].indexOf(model.typeId.toString()) > -1" ng-click="openTypeValidation()"></div-->
                    <!--toggleIcons Start--> 
                    <div class="row">
                      <div class="col-xs-12">
                        <div class="inner-title-filter inner-title-filter-first bold-title">
                          <span>Process shown in technician app</span>
                          <a href="javascript:void(0)" class="icon-required" style="margin-left: 5px;">
                            <i class="fa fa-question-circle" aria-hidden="true"></i>
                            <span class="sch-help">When Cleaned Filter button is used in app, this is the process the technician must complete. You can add start/end instructions and make pictures optional or required.</span>
                          </a>
                        </div>
                      </div>
                    </div>
                    <ul >
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('cleanFilteredData', 'instructionsBefore')" ng-class="{'active':cleanFilteredData.instructionsBefore}"><i class="fa fa-list-alt" aria-hidden="true"></i><div>Instructions (start)</div></a></li>
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('cleanFilteredData', 'beforePicture')" ng-class="{'active':cleanFilteredData.beforePicture}"><i class="fa fa-camera" aria-hidden="true"></i><div>Before<br>Pictures</div></a></li>
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('cleanFilteredData', 'afterPicture')" ng-class="{'active':cleanFilteredData.afterPicture}"><i class="fa fa-camera" aria-hidden="true"></i><div>After<br>Pictures</div></a></li>
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('cleanFilteredData', 'instructionsAfter')" ng-class="{'active':cleanFilteredData.instructionsAfter}"><i class="fa fa-list-alt" aria-hidden="true"></i><div>Instructions (end)</div></a></li>
                    </ul> 
                    <hr  ng-if="model.cleanFilteredData.instStartData || model.cleanFilteredData.instEndData" class="m-b0 m-t0" />                      
                    <div class="p-10 h-0-5x">
                      <div ng-if="model.cleanFilteredData.instStartData">
                        <strong>Instructions Before:</strong> 
                        <span ng-if="!showAllInstStartData"> {{ model.cleanFilteredData.instStartData | limitTo: 70 }}</span>                      
                        <span ng-if="showAllInstStartData"> {{model.cleanFilteredData.instStartData}}</span>
                        <span ng-show="model.cleanFilteredData.instStartData.length > 70 && !showAllInstStartData">... <a href="javascript:void(0)" ng-click="showAllInstStartData = true">more</a></span>
                        <span ng-show="showAllInstStartData"> <a href="javascript:void(0)" ng-click="showAllInstStartData = false">less</a></span>                  
                      </div>
                      <div ng-if="model.cleanFilteredData.instEndData">                     
                        <strong>Instructions After:</strong> 
                        <span ng-if="!showAllInstEndData"> {{ model.cleanFilteredData.instEndData | limitTo: 70 }}</span>                      
                        <span ng-if="showAllInstEndData"> {{model.cleanFilteredData.instEndData}}</span>
                        <span ng-show="model.cleanFilteredData.instEndData.length > 70 && !showAllInstEndData">... <a href="javascript:void(0)" ng-click="showAllInstEndData = true">more</a></span>
                        <span ng-show="showAllInstEndData"> <a href="javascript:void(0)" ng-click="showAllInstEndData = false">less</a></span>                        
                      </div>                      
                    </div>
                    <!--toggleIcons End--> 
                    <!--inline-radio-button Start-->    
                    <div class="row">
                      <div class="col-xs-12">
                        <div class="inner-title-filter">
                          <span>Require techs to clean filter on a route stop</span>
                          <a href="javascript:void(0)" class="icon-required" style="margin-left: 5px;">
                            <i class="fa fa-question-circle" aria-hidden="true"></i>
                            <span class="sch-help">Choose how often you want to require the route technician to clean the filter as part of regular service. If you charge extra for filter cleans and/or have a different technician complete them, choose "Never". You will use the schedule option below in this case.</span>
                          </a>
                        </div>
                      </div>
                    </div>             
                    <div class="formGroup inline-radio-button inline-radio-button-aligned">                       
                      <div class="radio-default2">                           
                        <label for="cleanFilteredDataRequired1" >
                          Never
                          <input type="radio" name="cleanFilteredDataRequired" id="cleanFilteredDataRequired1" value="1" ng-model="model.cleanFilteredData.required"  ng-checked="model.cleanFilteredData.required == '1'" ng-change="setRequired('cleanFilteredData')" />
                          <span></span>
                        </label>
                      </div>   
                      <div class="radio-default2">                           
                        <label for="cleanFilteredDataRequired2" >
                          Always
                          <input type="radio" name="cleanFilteredDataRequired" id="cleanFilteredDataRequired2" value="2" ng-model="model.cleanFilteredData.required"  ng-checked="model.cleanFilteredData.required == '2'" ng-change="setRequired('cleanFilteredData')" />
                          <span></span>
                        </label>
                      </div>                 
                      <div class="radio-default2  equipment-filter-visit-counter">                           
                        <label for="cleanFilteredDataRequired3" >                          
                          Every <input ng-change="updateEditedCounter('cleanFilteredData')" type="number" class="input-under-radio" name="cleanFilteredDataWeeks" id="cleanFilteredDataWeeks" ng-model="model.cleanFilteredData.weeks" maxlength="2" ng-min="1" oninput="this.value=this.value.slice(0,this.maxLength)" ng-blur="model.cleanFilteredData.required == '3' && saveDetails('cleanFilteredData')" /> Visit(s)                           
                          <input type="radio" name="cleanFilteredDataRequired" id="cleanFilteredDataRequired3" value="3" ng-model="model.cleanFilteredData.required"  ng-checked="model.cleanFilteredData.required == '3'" ng-change="setRequired('cleanFilteredData')" />
                          <span></span>
                        </label>
                        <div ng-if="model.cleanFilteredData.required == 3 && model.cleanFilteredData.counter>=0 && (model.cleanFilteredData.weeks && model.cleanFilteredData.weeks > 0)" class="equipment-filter-visit-counter-msg">
                          <div ng-if="!isCleanFilteredDataCounterUpdated && model.cleanFilteredData.counter>0">required in {{model.cleanFilteredData.counter}} more visits</div>
                          <div ng-if="isCleanFilteredDataCounterUpdated && model.cleanFilteredData.weeks>1">required in {{model.cleanFilteredData.weeks}} more visits</div>
                          <div ng-if="(!isCleanFilteredDataCounterUpdated && model.cleanFilteredData.counter==0) || (isCleanFilteredDataCounterUpdated && model.cleanFilteredData.weeks == 1)">required on next visit</div>
                        </div>
                      </div>                                                             
                    </div>  
                    <!--inline-radio-button End-->
                    <!--Create schedule Start -->                                  
                    <div class="row">
                      <div class="col-xs-12">
                        <div class="inner-title-filter">
                            <span>Create filter clean jobs on a schedule</span>
                            <a href="javascript:void(0)" class="icon-required" style="margin-left: 5px;">
                              <i class="fa fa-question-circle" aria-hidden="true"></i>
                              <span class="sch-help">If you want to automatically create separate filter clean jobs based on a preset schedule, activate it below. You can set this to occur on certain dates every year or after a period of time since the last cleaning. when the job is created, it will appear in the unscheduled section and be marked as a filter clean for easy management. Default schedule templates can be configured in settings.</span>
                            </a>
                        </div>
                      </div>
                    </div>
                    <div class="clear-schedule-box" ng-class="gettingDetailsradionchange ? 'disable-click-on-element' : ''">
                      <span ng-if="!model.typeId">
                        <span class="no-clear-filter-selected">You must select a filter type to activate filter clean schedule</span>
                      </span>
                      <span ng-if="model.typeId">
                        <span ng-if="!currentEqp.detail.isSchedule || currentEqp.detail.isSchedule==1 || currentEqp.detail.isSchedule==0"><span  ng-click="!editFilterLocalisOpening && editFilterLocal(currentEqp)" class="clear-schedule-box-toggle">
                          <span ng-if="currentEqp.detail.isSchedule==1">Schedule is active</span>
                          <span ng-if="!currentEqp.detail.isSchedule || currentEqp.detail.isSchedule==0">Activate Schedule</span>
                          <label class="switch small"><span ng-class="currentEqp.detail.isSchedule ? 'slider round active' : 'slider round'" class="slider round"></span></label></span>
                          <span ng-if="currentEqp.detail.isSchedule==1"><small>(click to edit)</small></span>
                        </span>
                      </span>                      
                    </div>
                    <!--Create schedule End-->
                    <!--history-box Start-->                      
                    <div class="history-box history-box-aligned">
                      <div class="m-b10 p-relative">                      
                        <div class="icon-required icon-required-log-cleaning" ng-class="{ 'show-tooltip' : model.typeId == '' }">
                          <div class="pointer" ng-click="model.typeId != '' ? openLogDatePopup('Cleaned Filter') : null">Log Cleaning <i class="fa fa-calendar-plus-o light-blue"></i></div>
                          <span class="sch-help">You must select a filter type to log cleaning date</span>
                        </div>
                      </div>                          
                      <div ng-if="lastFilterCleanedDate.length > 0" ng-hide="lastFilterCleanedDate[0].isDeleted">Last Cleaned {{lastFilterCleanedDate[0].createTime | date: 'MM/dd/yyyy'}}</div>
                      <div class="m-b10 p-relative" ng-show="lastFilterCleanedDate.length > 0">                         
                        <div class="pointer" ng-click="openLastDatePopup('lastFilterCleanedDatesPopup');">History <i class="fa fa-history light-blue"   ></i></div>
                        <div ng-if="lastFilterCleanedDatesPopup" class="quick-popup last-dates-popup">  
                          <div class="popup-header popup-header-log">
                            <span class="heading">Last Cleaned</span>                      
                            <div class="popup-close" ng-click="closeLastDatePopup('lastFilterCleanedDatesPopup')">
                              <i class="fa fa-times-circle" aria-hidden="true"></i>
                            </div>
                          </div>
                          <div class="p-tb10 p-lr10 scrollable-box" style="overflow-y: unset;"> 
                            <div class="row">
                              <div class="col-sm-6" ng-repeat="date in lastFilterCleanedDateTen track by $index" style="display: flex;" ng-class="date.isDeleted ? 'deleted' : ''" ng-if="$index < 28"><a href="#" ng-if="date.isDeleted" class="icon-required" style="text-decoration: none;width: 75%; position: absolute; height: 24px; cursor: inherit;"><span class="sch-help awesome-tooltip">Deleted by {{date.userName}} on {{date.deletedOn | date: 'MM/dd/yyyy' }} at {{date.deletedOn | date:'h:mm a'}}</span></a><i class="fa fa-clock-o light-blue" aria-hidden="true" style="padding: 4px 2px 0 0;"></i> {{date.createTime | date: 'MM/dd/yyyy'}}
                                <a class="delete" href="javascript:void(0)" ng-show="!data.isSystem" ng-click="cleanHistoryDeleteConfirm(date, $index)" ng-hide="date.isDeleted"><i class="fa fa-times"></i></a>
                              </div>
                            </div>                                        
                          </div>
                          <div class="text-center see-more-date">
                            <span ng-if="lastFilterCleanedDateTenSeeMore" ng-click="seeMoreDates('lastFilterCleanedDateTen')">See More</span>
                          </div>
                        </div> 
                      </div>                        
                    </div>                   
                    <!--history-box End-->    
                    <!--quick-popup before After Start-->
                    <div ng-if="cleanFilteredData.instructionsBeforePopup" class="quick-popup before">  
                      <div class="popup-header"><span class="heading">Instructions Before</span>                        
                      </div>
                      <div class="p-tb10 p-lr10">
                        <textarea  class="form-control minH-100" ng-model="model.cleanFilteredData.instStartData" name="instStartData">{{model.cleanFilteredData.instStartData}}</textarea>
                        <div class="m-t10 text-center"><button class="add-button button blue-bg sm-btn" type="button" ng-click="saveDetails('cleanFilteredData', 'instructionsBefore')" >Save</button></div>
                      </div>
                    </div>   
                    <div ng-if="cleanFilteredData.instructionsAfterPopup" class="quick-popup after">  
                      <div class="popup-header"><span class="heading">Instructions After</span>                          
                      </div>
                      <div class="p-tb10 p-lr10">
                        <textarea  class="form-control minH-100" ng-model="model.cleanFilteredData.instEndData" name="instEndData">{{model.cleanFilteredData.instEndData}}</textarea>
                        <div class="m-t10 text-center"><button class="add-button button blue-bg sm-btn"  type="button" ng-click="saveDetails('cleanFilteredData', 'instructionsAfter')" >Save</button></div>
                      </div>
                    </div>   
                    <!--quick-popup before After End-->
                  </div>
                </div>
                <!--Filtered Cleaned End-->

                <!--Salt Cell cleaned Start-->
                <div class="formGroup process-wrapper" ng-if="selectedEquipment[0].eqId == 6 && showCleanedSaltCell">                     
                  <div class="main-title">Salt Cell Clean</div>
                  <div class="grey-box" style="{{['18'].indexOf(model.typeId.toString()) == -1 ? 'position:relative':''}}">
                    <!--div class="validation-overlay" ng-hide="['18'].indexOf(model.typeId.toString()) > -1" ng-click="openTypeValidation()"></div-->
                    <!--toggleIcons Start--> 
                    <div class="row">
                      <div class="col-xs-12">
                        <div class="inner-title-filter inner-title-filter-first bold-title">
                          <span>Process shown in technician app</span>
                          <a href="javascript:void(0)" class="icon-required" style="margin-left: 5px;">
                            <i class="fa fa-question-circle" aria-hidden="true"></i>
                            <span class="sch-help">When Salt Cell Clean button is used in app, this is the process the technician must complete. You can add start/end instructions and make pictures optional or required</span>
                          </a>
                        </div>
                      </div>
                    </div>
                    <ul>
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('cleanSaltCellData', 'instructionsBefore')" ng-class="{'active':cleanSaltCellData.instructionsBefore}"><i class="fa fa-list-alt" aria-hidden="true"></i><div>Instructions (start)</div></a></li>
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('cleanSaltCellData', 'beforePicture')" ng-class="{'active':cleanSaltCellData.beforePicture}"><i class="fa fa-camera" aria-hidden="true"></i><div>Before<br>Pictures</div></a></li>
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('cleanSaltCellData', 'afterPicture')" ng-class="{'active':cleanSaltCellData.afterPicture}"><i class="fa fa-camera" aria-hidden="true"></i><div>After<br>Pictures</div></a></li>
                      <li><a href="javascript:void(0)" ng-click="toggleIcons('cleanSaltCellData', 'instructionsAfter')" ng-class="{'active':cleanSaltCellData.instructionsAfter}"><i class="fa fa-list-alt" aria-hidden="true"></i><div>Instructions (end)</div></a></li>
                    </ul> 
                    <hr  ng-if="model.cleanSaltCellData.instStartData || model.cleanSaltCellData.instEndData" class="m-b0 m-t0" />
                    <div class="p-10 h-0-5x">
                      <div ng-if="model.cleanSaltCellData.instStartData">
                        <strong>Instructions Before:</strong> 
                        <span ng-if="!showAllInstStartData"> {{ model.cleanSaltCellData.instStartData | limitTo: 70 }}</span>                      
                        <span ng-if="showAllInstStartData"> {{model.cleanSaltCellData.instStartData}}</span>
                        <span ng-show="model.cleanSaltCellData.instStartData.length > 70 && !showAllInstStartData">... <a href="javascript:void(0)" ng-click="showAllInstStartData = true">more</a></span>
                        <span ng-show="showAllInstStartData"> <a href="javascript:void(0)" ng-click="showAllInstStartData = false">less</a></span>                  
                      </div>
                      <div ng-if="model.cleanSaltCellData.instEndData">                     
                        <strong>Instructions After:</strong> 
                        <span ng-if="!showAllInstEndData"> {{ model.cleanSaltCellData.instEndData | limitTo: 70 }}</span>                      
                        <span ng-if="showAllInstEndData"> {{model.cleanSaltCellData.instEndData}}</span>
                        <span ng-show="model.cleanSaltCellData.instEndData.length > 70 && !showAllInstEndData">... <a href="javascript:void(0)" ng-click="showAllInstEndData = true">more</a></span>
                        <span ng-show="showAllInstEndData"> <a href="javascript:void(0)" ng-click="showAllInstEndData = false">less</a></span>                        
                      </div>                      
                    </div>
                    <!--toggleIcons End--> 
                    <!--inline-radio-button Start-->  
                    <div class="row">
                      <div class="col-xs-12">
                        <div class="inner-title-filter">
                          <span>Require techs to clean salt cell on a route stop</span>
                          <a href="javascript:void(0)" class="icon-required" style="margin-left: 5px;">
                            <i class="fa fa-question-circle" aria-hidden="true"></i>
                            <span class="sch-help">Choose how often you want the route technician to clean the salt cell as part of regular service. If you charge extra for salt cell cleaning and/or have a different technician perform the cleaning, choose "Never". You will use the schedule option below instead.</span>
                          </a>
                        </div>
                      </div>
                    </div>             
                    <div class="formGroup inline-radio-button inline-radio-button-aligned">                   
                      <div class="radio-default2">                           
                        <label for="cleanSaltCellDataRequired1" >
                          Never
                          <input type="radio" name="cleanSaltCellDataRequired" id="cleanSaltCellDataRequired1" value="1" ng-model="model.cleanSaltCellData.required"  ng-checked="model.cleanSaltCellData.required == '1'" ng-change="setRequired('cleanSaltCellData')"/>
                          <span></span>
                        </label>
                      </div>   
                      <div class="radio-default2">                           
                        <label for="cleanSaltCellDataRequired2" >
                          Always
                          <input type="radio" name="cleanSaltCellDataRequired" id="cleanSaltCellDataRequired2" value="2" ng-model="model.cleanSaltCellData.required"  ng-checked="model.cleanSaltCellData.required == '2'" ng-change="setRequired('cleanSaltCellData')"/>
                          <span></span>
                        </label>
                      </div>                 
                      <div class="radio-default2  equipment-filter-visit-counter">                           
                        <label for="cleanSaltCellDataRequired3" >
                          Every <input ng-change="updateEditedCounter('cleanSaltCellData')" type="number" class="input-under-radio" name="cleanSaltCellDataWeeks" id="cleanSaltCellDataWeeks" ng-model="model.cleanSaltCellData.weeks" maxlength="2" ng-min="1" oninput="this.value=this.value.slice(0,this.maxLength)" ng-blur="model.cleanSaltCellData.required == '3' && saveDetails('cleanSaltCellData')" /> Visit(s)
                          <input type="radio" name="cleanSaltCellDataRequired" id="cleanSaltCellDataRequired3" value="3" ng-model="model.cleanSaltCellData.required"  ng-checked="model.cleanSaltCellData.required == '3'" ng-change="setRequired('cleanSaltCellData')" />
                          <span></span>
                        </label>      
                        <div ng-if="model.cleanSaltCellData.required == 3 && model.cleanSaltCellData.counter>=0 && (model.cleanSaltCellData.weeks && model.cleanSaltCellData.weeks > 0)" class="equipment-filter-visit-counter-msg">
                          <div ng-if="!isCleanSaltCellDataCounterUpdated && model.cleanSaltCellData.counter>0">required in {{model.cleanSaltCellData.counter}} more visits</div>
                          <div ng-if="isCleanSaltCellDataCounterUpdated && model.cleanSaltCellData.weeks>1">required in {{model.cleanSaltCellData.weeks}} more visits</div>
                          <div ng-if="(!isCleanSaltCellDataCounterUpdated && model.cleanSaltCellData.counter==0) || (isCleanSaltCellDataCounterUpdated && model.cleanSaltCellData.weeks == 1)">required on next visit</div>
                        </div>
                      </div>                                                             
                    </div>  
                    <!--inline-radio-button End-->
                     <!--Create schedule Start -->                                  
                     <div class="row">
                      <div class="col-xs-12">
                        <div class="inner-title-filter">
                            <span>Create salt cell clean jobs on a schedule</span>
                            <a href="javascript:void(0)" class="icon-required" style="margin-left: 5px;">
                              <i class="fa fa-question-circle" aria-hidden="true"></i>
                              <span class="sch-help">If you want to automatically create separate salt cell cleaning jobs based on a preset schedule, activate it below. You can set this to occur on certain dates of the year or after a period of time since the last cleaning. when the job is created, it will appear in the unscheduled section and be marked as a salt cell clean for easy management. Default schedule templates can be configured in settings.</span>
                            </a>
                        </div>
                      </div>
                    </div>
                    <div class="clear-schedule-box" ng-class="gettingDetailsradionchange ? 'disable-click-on-element' : ''">
                      <span ng-if="!model.typeId">
                        <span class="no-clear-filter-selected">You must select a type to activate salt cell clean schedule</span>
                      </span>
                      <span ng-if="model.typeId">
                        <span ng-if="!currentEqp.detail.isSchedule || currentEqp.detail.isSchedule==1 || currentEqp.detail.isSchedule==0"><span  ng-click="!editFilterLocalisOpening && editFilterLocal(currentEqp)" class="clear-schedule-box-toggle">
                          <span ng-if="currentEqp.detail.isSchedule==1">Schedule is active</span>
                          <span ng-if="!currentEqp.detail.isSchedule || currentEqp.detail.isSchedule==0">Activate Schedule</span>
                          <label class="switch small"><span ng-class="currentEqp.detail.isSchedule ? 'slider round active' : 'slider round'" class="slider round"></span></label></span>
                          <span ng-if="currentEqp.detail.isSchedule==1"><small>(click to edit)</small></span>
                        </span>
                      </span>                      
                    </div>
                    <!--Create schedule End-->
                    <!--Create schedule Start -->                                  
                    <!-- <div class="row">
                      <div class="col-xs-12">
                        <div class="inner-title-filter">
                            <span>Create salt cell clean jobs on a schedule</span>
                            <a href="javascript:void(0)" class="icon-required" style="margin-left: 5px;">
                              <i class="fa fa-question-circle" aria-hidden="true"></i>
                              <span class="sch-help">Create salt cell clean jobs on a schedule</span>
                            </a>
                        </div>
                      </div>
                    </div>
                    <div class="clear-schedule-box" ng-class="gettingDetailsradionchange ? 'disable-click-on-element' : ''">                      
                      <span ng-if="currentEqp.detail.isSchedule===undefined" class="no-clear-filter-selected">You must select a filter type to activate salt cell clean schedule</span>
                      <span ng-if="currentEqp.detail.isSchedule==1 || currentEqp.detail.isSchedule==0"><span  ng-click="editFilterLocal(currentEqp)" class="clear-schedule-box-toggle">
                        <span ng-if="currentEqp.detail.isSchedule==1">Schedule is active</span>
                        <span ng-if="currentEqp.detail.isSchedule==0">Activate Schedule</span>
                        <label class="switch small"><span ng-class="currentEqp.detail.isSchedule ? 'slider round active' : 'slider round'" class="slider round"></span></label></span>
                        <span ng-if="currentEqp.detail.isSchedule==1"><small>(click to edit)</small></span>
                      </span>
                    </div> -->
                    <!--Create schedule End-->                    
                    <!--history-box Start-->
                    <div class="history-box history-box-aligned">
                      <div class="m-b10 p-relative">                      
                        <div class="icon-required icon-required-log-cleaning" ng-class="{ 'show-tooltip' : model.typeId == '' }">
                          <div class="pointer" ng-click="model.typeId != '' ? openLogDatePopup('Cleaned Salt Cell') : null">Log Cleaning <i class="fa fa-calendar-plus-o light-blue"></i></div>
                          <span class="sch-help">You must select a filter type to log cleaning date</span>
                        </div>
                      </div>                          
                      <div ng-show="saltCleanedHistoryDate.length > 0" ng-hide="saltCleanedHistoryDate.length == 0 || saltCleanedHistoryDate[0].isDeleted">Last Cleaned {{saltCleanedHistoryDate[0].createTime | date: 'MM/dd/yyyy'}}</div>
                      <div class="m-b10 p-relative" ng-show="saltCleanedHistoryDate.length > 0">                         
                        <div class="pointer" ng-click="openLastDatePopup('saltCleanedHistoryDatesPopup');">History <i class="fa fa-history light-blue"   ></i></div>
                        <div ng-if="saltCleanedHistoryDatesPopup" class="quick-popup last-dates-popup">  
                          <div class="popup-header popup-header-log">
                            <span class="heading">Last Cleaned</span>                      
                            <div class="popup-close" ng-click="closeLastDatePopup('saltCleanedHistoryDatesPopup')">
                              <i class="fa fa-times-circle" aria-hidden="true"></i>
                            </div>
                          </div>  
                          <div class="p-tb10 p-lr10 scrollable-box" style="overflow-y: unset;"> 
                            <div class="row">
                              <div class="col-sm-6" ng-repeat="date in saltCleanedHistoryDateTen track by $index" style="display: flex;" ng-class="date.isDeleted ? 'deleted' : ''" ng-if="$index < 28"><a href="javascript:void(0)" ng-if="date.isDeleted" class="icon-required" style="text-decoration: none;width: 75%; position: absolute; height: 24px; cursor: inherit;"><span class="sch-help log-tooltip"> Deleted by {{date.userName}} on {{date.deletedOn | date: 'MM/dd/yyyy' }} at {{date.deletedOn | date:'h:mm a'}}</span></a><i class="fa fa-clock-o light-blue" aria-hidden="true" style="padding: 4px 2px 0 0;"></i> {{date.createTime | date: 'MM/dd/yyyy'}}
                                <a class="delete" href="javascript:void(0)" ng-show="!data.isSystem" ng-click="cleanHistoryDeleteConfirm(date, $index)" ng-hide="date.isDeleted"><i class="fa fa-times"></i></a>
                              </div>
                            </div>                                        
                          </div>
                          <div class="text-center see-more-date">
                            <span ng-if="saltCleanedHistoryDateTenSeeMore" ng-click="seeMoreDates('saltCleanedHistoryDateTen')">See More</span>
                          </div>
                        </div> 
                      </div> 
                    </div> 
                    <!--history-box End-->  
                    <!--quick-popup before After Start-->
                    <div ng-if="cleanSaltCellData.instructionsBeforePopup" class="quick-popup before">  
                      <div class="popup-header"><span class="heading">Instructions Before</span>                        
                      </div>
                      <div class="p-tb10 p-lr10">
                        <textarea  class="form-control minH-100" ng-model="model.cleanSaltCellData.instStartData" name="instStartData">{{model.cleanSaltCellData.instStartData}}</textarea>
                        <div class="m-t10 text-center"><button class="add-button button blue-bg sm-btn" type="button" ng-click="saveDetails('cleanSaltCellData', 'instructionsBefore')" >Save</button></div>
                      </div>
                    </div>   
                    <div ng-if="cleanSaltCellData.instructionsAfterPopup" class="quick-popup after">  
                      <div class="popup-header"><span class="heading">Instructions After</span>                          
                      </div>
                      <div class="p-tb10 p-lr10">
                        <textarea  class="form-control minH-100" ng-model="model.cleanSaltCellData.instEndData" name="instEndData">{{model.cleanSaltCellData.instEndData}}</textarea>
                        <div class="m-t10 text-center"><button class="add-button button blue-bg sm-btn"  type="button" ng-click="saveDetails('cleanSaltCellData', 'instructionsAfter')" >Save</button></div>
                      </div>
                    </div>   
                    <!--quick-popup before After End-->
                  </div>
                </div>
                <!--Salt Cell cleaned End-->
                

                


                


                <div ng-if="waterLevelLowHistoryDate.length > 0 && selectedEquipment[0].eqId == 5"  class="m-b10 p-relative">
                  Last Low {{waterLevelLowHistoryDate[0].createTime | date: 'MM/dd/yyyy'}} <i class="fa fa-calendar-o light-blue pointer" ng-click="openLastDatePopup('waterLevelLowHistoryDatesPopup');"  ></i>
                  <div ng-if="waterLevelLowHistoryDatesPopup" class="quick-popup last-dates-popup">  
                      <div class="popup-header"><span class="heading">Last Low</span>                      
                        <div class="popup-close" ng-click="closeLastDatePopup('waterLevelLowHistoryDatesPopup')"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
                      </div>
                      <div class="p-tb10 p-lr10 scrollable-box"> 
                          <div class="row">
                            <div class="col-sm-6" ng-repeat="date in waterLevelLowHistoryDateTen track by $index"><i class="fa fa-clock-o light-blue" aria-hidden="true"></i> {{date.createTime | date: 'MM/dd/yyyy'}}</div>
                          </div>                                        
                        </div>
                        <div class="text-center see-more-date"><span ng-if="waterLevelLowHistoryDateTenSeeMore" ng-click="seeMoreDates('waterLevelLowHistoryDateTen')">See More</span></div>
                    </div> 
                </div>

               



                <div ng-if="selectedEquipment[0].hasPump" class="formGroup">                
                    <div class="main-title" ng-class="{'disabled': model.typeId == '7' || model.typeId == '19'}">Pump runs for <input type="text" name="timerValue" class="form-control inline" 
                      ng-model="model.timerValue"  
                      ng-pattern="/^((0?[0-9]|[0-9]|2[0-3]|1[0-9])(\.\d{1,2})?|(2[4])?)$/"
                      ng-disabled="model.typeId == '7' || model.typeId == '19'" ng-blur="saveTimer(selectedEquipment[0].eqId)"/> hour{{model.timerValue == 1 ? '' : 's' }} per day</div>             <span class="has-required" ng-if="equipmentForm.$submitted && equipmentForm.timerValue.$invalid || equipmentForm.timerValue.$touched && equipmentForm.timerValue.$invalid">Please enter hours between 0-24.</span>
                </div> 

           
                <div class="main-title" style="margin-bottom:15px;">Photos &nbsp;&nbsp;<button  class="add-button button blue-bg sm-btn m-t10" type="button" ng-click="browseImage()">Add </button></div>                           
                <div ng-if="photos.length > 0">
                    <ul class="medium-block-grid-3 backwash-photo-list" style="margin: 0 -15px;">
                      <li ng-repeat="photo in photos track by $index" id="eq-img-{{photo.id}}">
                        <i ng-if="canEditReadings==1" class="fa fa-times eqp-photo-close" aria-hidden="true" ng-click="deleteImageConfirm(photo.id,$index)"></i>
                        <img ng-src="{{photo.filePath}}" src="resources/images/placeholderphoto.gif" ng-click="showFullScreenImages($index)" class="cursor-pointer" />
                        <div class="text-center photo-caption" ng-if="photo.createdOn || photo.caption"  >
                            <span ng-if="photo.createdOn" class="photo-date">{{photo.createdOn | date: 'MM/dd/yyyy'}}</span>
                          <div ng-if="photo.caption"><hr style="margin:4px 0" />{{photo.caption ? photo.caption : ''}}</div>
                        </div>
                      </li>
                    </ul>
                  
                </div>                
               <input base-sixty-four-input="" id="equipmentPhoto" name="equipmentPhoto" ng-change="uploadFile($event, selectedEquipment[0].eqId)" ng-model="model.equipmentPhoto" style="display: none" type="file"/>
               <span class="has-required"  ng-if="errorImage">{{errorImage}}</span>
                     <div id="imageError"></div>
              </div>
        </div>
      </div>
    </form>
      <div class="navigation-arrow">
        <a href="javascript:void(0)" ng-click="showEquipmentDetail(equipmentPrev)" class="left arrow" ng-class="{'opacity01':imageInitialIndex != 999}" ><i class="fa fa-angle-left" aria-hidden="true"></i></a>
        <a href="javascript:void(0)" ng-click="showEquipmentDetail(equipmentNext)" class="right arrow" ng-class="{'opacity01':imageInitialIndex != 999}"><i class="fa fa-angle-right" aria-hidden="true"></i></a>
      </div>

    </div>
  </script>
</div>

  
<script type="text/ng-template" id="eraseDataConfirm.html" >
  <div class="dataTables_wrapper modal-box picture-videos-popup" style="width:400px; ">
    <div class="popup-header">
      <div class="h-1-5x b white text-center">Confirm</div>      
    </div>
     <div class="popup-body text-center">
       <div class="row-container">
         <div><label>Are you sure you want to erase all data for {{selectedEquipment[0].label}}?</label></div>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">CANCEL</button>&nbsp;
           <button class="add-button" type="submit" ng-click="eraseData()">confirm</button>
         </div>
       </div>
     </div>
 
  </div>
 </script>

 <script type="text/ng-template" id="saveDataConfirm.html" >
  <div class="dataTables_wrapper modal-box picture-videos-popup" style="width:400px; ">
    <div class="popup-header">
      <div class="h-1-5x b white text-center">Confirm</div>     
    </div>
     <div class="popup-body text-center">
       <div class="row-container">
         <div><label>Are you sure you want to continue saving the Equipment Card details without equipment type? This will reset the other details for this Equipment card.</label></div>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">CANCEL</button>&nbsp;
           <button class="add-button" type="submit" ng-click="saveEquipmentDetail(selectedEquipment[0].eqId, model)">confirm</button>
          
         </div>
       </div>
     </div>
 
  </div>
 </script>

 <script type="text/ng-template" id="saveDataForUnknownAlert.html" >
  <div class="dataTables_wrapper modal-box picture-videos-popup" style="width:400px; ">
    <div class="popup-header">
      <div class="h-1-5x b white text-center">Confirm</div>     
    </div>
     <div class="popup-body text-center">
       <div class="row-container">
         <div><label>Please select type to save the Equipment card details because this Equipment is already in Unknown status.</label></div>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">OK</button>
         </div>
       </div>
     </div>
 
  </div>
 </script>

 <script type="text/ng-template" id="picturesGallery.html">

  <div class="modal-box modal-gallery full-screen-gallery equipment-gallery">
    <div class="full-screen-inner">
      <div ng-click="closeThisDialog('Some value')" class="btn-cls">
        <i class="fa fa-close" aria-hidden="true"></i>
      </div>
      <div ng-if="photos.length > 0">
        <ui-carousel slides="photos" slides-to-show="1" slides-to-scroll="1" initial-slide="imageInitialIndex" autoplay="false" autoplay-speed="3000" dots="false">
          <carousel-item>
            <div class="image popup">
              <div class="slide-image">
                <img src="{{ item.filePath }}">
                <div class="modal-gallery-btm" ng-show="item.caption || item.createdOn" >                  
                    <span>{{item.createdOn ? item.createdOn : '' | date: 'MM/dd/yyyy'}}</span>
                    <span>{{item.caption ? ' - '+item.caption : ''}}</span>
                  </div>
                </div>
              </div>
            </div>
          </carousel-item>
        </ui-carousel>
      </div>
    </div>
  </div>
  </script> 

  <script type="text/ng-template" id="typeValidation.html" >
    <div class="dataTables_wrapper modal-box picture-videos-popup" style="width:400px; ">
      
       <div class="popup-body text-center">
         <div class="row-container">
           <div class="h-2x"><label>Please select Type</label></div>
           <br />
           <div class="set-chem-button m-b20" style="text-align: center;">
             <button class="add-button" ng-click="closeThisDialog('Some value')" type="button">OK</button>
           </div>
         </div>
       </div>   
    </div>
   </script>

   <script type="text/ng-template" id="deleteImageConfirm.html">
    <div class="dataTables_wrapper modal-box common-popup" style="width:400px; ">
      <div class="popup-header text-center">
        <span class="heading">Confirm</span>        
      </div>
       <div class="popup-body text-center">
         <div class="row-container">
           <div><label>Are you sure you want to delete this picture?</label></div>
           <br />
           <div class="set-chem-button m-b20" style="text-align: center;">
            <button class="add-button" type="submit" ng-click="closeThisDialog()">CANCEL</button>&nbsp;
            <button class="add-button btn-red" type="submit" ng-click="deleteEqImage()">CONFIRM</button>
          </div>
         </div>
       </div>
   
    </div>
   </script>


   <script type="text/ng-template" id="editFilterLocal.html">
    <div class="dataTables_wrapper modal-box modal-box-v2 common-popup editFilterTemplateLocal" style="max-width: 1200px; min-height: auto;">
      <div class="popup-header">
        <span class="route-audit-log-history log-history" ng-click="jobActivitySchedulePopup()"><i class="fa fa-history" ></i></span>
        <span class="heading ">{{templateNameHeading}}</span>
        <div class="popup-close popup-close--aligned" ng-click="closeThisDialog();"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
      </div>
    <div class="create-new-job-model">
      
      <form ng-init="jobTemplateInit()" rc-submit="saveFilterLocalTemplate()">
        <div class="colored-scroll-bar-section">
          <!-- <span  >5555</span> -->
          <div ng-if="isProcessing" class="spinner" style="border:none; position: absolute;">
            <div class="spinner-item">
              <div class="spinner-animation"><img border="0" src="resources/images/spinner.gif" /></div>
            </div>
          </div>
      <div class="create-new-job-form">
        <!-- <success ng-if="successProductForm" message="{{successProductForm}}"></success> -->
        <error message="{{errorProductForm}}" ng-if="errorProductForm"></error>
         <div class="create-new-body container">
          
          
          <div class = "row">
            <h3 class="m-b10">
              <span class="cursor-pointer" ng-click="editFilterLocalAPI(currentEqp)">
                <span ng-if="saltClean">Activate schedule</span>
                <!-- <span ng-if="filterClean">Default settings when filter clean schedule is active</span> -->
                <span ng-if="filterClean">Activate schedule</span>
                <label class="switch">
                  <span ng-class="currentEqp.detail.isSchedule ? 'slider round active' : 'slider round'" class="slider round"></span>
                </label>    
              </span>                           
            </h3>
           
            <div class="panel-disable-holder" ng-class="currentEqp.detail.isSchedule ? '' : 'disabled'">
              <div class="p-l30 p-30 m-b50 defaul-settings-filter">
                <div class="row" style="max-width:580px;">
                  <div class="col-md-7">
                    <div class="p-l30 p-30 m-b50 defaul-settings-filter">
                      <label class = "often"> How Often ? <a href="javascript:void(0)" class="icon-required inverce"><i class="fa fa-question-circle" aria-hidden="true"></i>
                        <span class="sch-help" ng-if="filterClean"><p>This determines when Pool Brain will automatically create a filter clean job for a property. Every 26 weeks would be every 26 weeks from the date of the last time the filter was cleaned. Specific dates would create a job on each date you select every year. For example, September 1st and February 1st of each year.</p></span>
                        <span class="sch-help" ng-if="saltClean"><p>This determines when Pool Brain will automatically create a salt cell clean job for a property. Every 26 weeks would be every 26 weeks from the date of the last time the salt cell was cleaned. Specific dates would create a job on each of the dates you select every year.</p></span>
                      </a></label>
                      <div class="form-group">
                        <div class="radio-default2"><label for="everyWeek">Every<input type="radio" name="howOften" id="everyWeek" value="every" ng-change="oftenEveryInputClicked()" ng-model="oneJobModel.job.how_often" ng-checked="oneJobModel.job.how_often == 'every'" /><span></span></label></div>
                        <label for="everyWeek" class="filter-often-input-label">
                          <div class="form-group-inline filter-often-input" ng-class="{ 'selected' : oneJobModel.job.how_often == 'every'}">
                            <input type="text" ng-blur="saveFilterLocalTemplate()" ng-model="oneJobModel.job.frequency" name="weeks" id="frequency_val"  value="" class = "week filter-often-input-original" allow-typing="^[0-9. ]+$" maxlength="2" />
                            <input type="text" value="" class = "week filter-often-input-fake"/>
                            <span class="dates">Weeks</span>
                          </div></label>
                      </div>
                      <div ng-show="oneJobModel.job.how_often == 'every'" class="form-group last-create-job-will-form-group">
                        <p>Last cleaned on
                          <b ng-if="oneJobModel.job.jobLastCleanedOn=='Never'">Never</b>
                          <b ng-if="oneJobModel.job.isDeleted">Never</b>
                          <b ng-if="!oneJobModel.job.jobLastCleanedOn">Never</b>
                          <b ng-if="oneJobModel.job.jobLastCleanedOn && oneJobModel.job.jobLastCleanedOn!=='Never'" ng-hide="oneJobModel.job.isDeleted">{{oneJobModel.job.jobLastCleanedOn | date: 'MM/dd/yy'}}</b>
                        </p>
                        <div ng-if="oneJobModel.job.jobWasCreatedOn && oneJobModel.job.jobWasCreatedOn!=='Never'" style="position: relative;width: 100%; font-weight: bold;color: red;">Job was created on 
                          <b>{{oneJobModel.job.jobWasCreatedOn | date: 'MM/dd/yy'}}</b>
                          <a href="javascript:void(0)" class="icon-required" style="position: absolute;right: -4px;top: 0;">
                            <i class="fa fa-question-circle" aria-hidden="true" style="position: static;transform: inherit;font-size: 17px;"></i>
                            <span style="width:200px;right: -82px;z-index: 55;"><p>A job was created on this date per the schedule settings. A new date will be set for another job to be created once the last cleaned on date is updated. This can be done manually by you or it will happen automatically when the filter clean process for this property is completed in the technician app.</p></span>
                          </a>
                        </div>
                        <div ng-if="oneJobModel.job.jobWasCreatedOn && oneJobModel.job.jobWasCreatedOn=='Never'" style="position: relative;width: 100%;">Job will be created on 
                          <b ng-if="!oneJobModel.job.jobWillBeCreatedOn">Never</b>
                          <b ng-if="oneJobModel.job.jobWillBeCreatedOn && oneJobModel.job.jobWillBeCreatedOn==='Never'">{{oneJobModel.job.jobWillBeCreatedOn}}</b>
                          <b ng-if="oneJobModel.job.jobWillBeCreatedOn && oneJobModel.job.jobWillBeCreatedOn!=='Never'">{{oneJobModel.job.jobWillBeCreatedOn | date: 'MM/dd/yy'}}</b>
                        </div>
                      </div>
                      <div class = "form-group">
                        <div class="radio-default2"><label for="specificDates">On specific dates<input type="radio" name="howOften" id="specificDates"  ng-change="oftenDateInputClicked()" ng-model="oneJobModel.job.how_often" ng-checked="oneJobModel.job.how_often == 'specific'" value="specific" /><span></span></label></div>
                        <a ng-show="oneJobModel.job.how_often == 'specific' || !oneJobModel.job.how_often"  id="add_extra_date" class="btn add-btn "> Add <i class="fa fa-plus-circle"></i></a>                          
                      </div>
                      <!-- <div ng-show="oneJobModel.job.how_often == 'specific' || !oneJobModel.job.how_often">
                        <ul>
                          <li ng-repeat="dateObj in oneJobModel.job.dates track by $index">{{dateObj.date | monthName}} <a class="delete ng-scope" href="javascript:void(0)" ng-click="removeStartDates($index)"><i class="fa fa-times"></i></a></li>
                        </ul>                          
                      </div> -->
                      <div class = "filter-box" ng-show="oneJobModel.job.how_often == 'specific' || !oneJobModel.job.how_often">
                        <ul class = "on-date">
                          <!-- <div class="form-group last-create-job-will-form-group">
                            <div ng-if="oneJobModel.job.dates.length > 0" style="position: relative;width: 100%;">Job will be created on 
                              <b>{{onSpecificDateFilterd | monthName}} {{onSpecificDateFilterd.split('-')[2]}}</b>
                            </div>
                          </div> -->
                          <li ng-repeat="dateObj in oneJobModel.job.dates track by $index">
                            <span class= "filter-date">{{dateObj.date | monthName}}
                             <i class="fa fa-close close-filter" ng-click="removeStartDates($index)"></i>
                            </span> 
                            <span style="font-size: x-small;">Job will be created on {{ getFromattedSaltCleanDate(dateObj.date) }}</span>
                          </li>
                        </ul>                          
                      </div>
                    </div>
                  </div>
                  <div class="col-md-5">
                    <div class="p-l30 p-30 m-b50 defaul-settings-filter">
                      <label class = "often">Ends On : <a href="javascript:void(0)" class="icon-required"><i class="fa fa-question-circle" aria-hidden="true"></i><span class="sch-help"><p>If a date is selected, schedule will be deactivated automatically on that date.</p></span></a></label>
                      <div class="form-group">
                        <div class="radio-default2"><label for="endsOnNever">Never<input type="radio"  ng-change="saveFilterLocalTemplate()" name="endsOn" id="endsOnNever" value="never" ng-model="oneJobModel.job.ends_on" ng-checked="oneJobModel.job.ends_on == 'never'" /><span></span></label></div>
                      </div>
                      <div class = "form-group model-date">
                        <div class="radio-default2">
                          <label for="endsOnOnSpecificDates">Date <input type="radio" ng-change="saveFilterLocalTemplate()" name="endsOn" id="endsOnOnSpecificDates" value="specific" ng-model="oneJobModel.job.ends_on" ng-checked="oneJobModel.job.ends_on == 'specific'" /><span></span></label>
                          <a style="top:-1px;" ng-show="oneJobModel.job.ends_on == 'specific'" id="end_date"  placeholder="Date" ng-model="oneJobModel.job.end_date" class="btn calender-icon"><i class="fa fa-calendar"></i></a>
                        </div>
                        <div ng-if="endDateistence && oneJobModel.job.ends_on == 'specific'" class="filter-date filter-date-v2" style="width: 110px;">{{endDateistence}} <i class="fa fa-close close-filter" ng-click="removeEndDate()"></i></div>
                        <!--<div class="datePicker input-daterange" ng-show="oneJobModel.job.ends_on == 'specific'">
                          <div class="smallview" id="end_cal_parent" date-format="yyyy-MM-dd">
                            <input type="text" class="form-control" datePicker  placeholder="Date" ng-model="oneJobModel.job.end_date" />
                            <i class="fa fa-calendar-o" aria-hidden="true"></i> 
                          </div>
                      </div>-->
                          
                        
                      </div>
                    </div>
                  </div>
                
               
              </div>
            </div>
          </div>
          <div class="panel-disable-holder" ng-class="currentEqp.detail.isSchedule ? '' : 'disabled'">
          <div class="row">
              <div class="col-md-6">
                <div class="row">
                  <div class="col-md-7">
                    <label>Title <a href="javascript:void(0)" class="icon-required inverce" style="margin-left: 10px;">
                      <i class="fa fa-question-circle" aria-hidden="true"></i>
                      <span class="sch-help"><p>Technician can see this in app. A brief description of the overall job. Example: Filter pump install.</p></span>
                    </a></label>
                      <div class="form-group" id="tempTitle">
                        <input class="form-control" ng-blur="saveFilterLocalTemplate()"  ng-model="oneJobModel.job.jobTitle" name="title" placeholder="Brief Description" type="text"/>
                      </div>
                  </div>
                  <div class="col-md-5">
                    <label>Duration <a href="javascript:void(0)" class="icon-required checklist-help" style="margin-left: 10px;">
                      <i class="fa fa-question-circle" aria-hidden="true"></i>
                      <span class="sch-help"><p>Technician can see this in app. Total estimated job time. It will update automatically when you add products & services or you can set it manually.</p></span>
                    </a></label>
        

                      <div class="form-group duration-picker">
                        <span class="duration-field" onclick="$('#durationPickerTemp').datetimepicker('show');">{{oneJobModel.job.duration | duration}}</span>
                        <input ng-blur="saveFilterLocalTemplate()" class="form-control duration" id="durationPickerTemp" datetimepicker datetimepicker-disable-drop options="durationOption" ng-model="oneJobModel.job.duration" name="duration" placeholder="0 hr  0 min" type="text"/>
                        <img src="resources/images/watch-icon.png" />
                      </div>

                      
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-12">
                    <label>Instructions <a href="javascript:void(0)" class="icon-required checklist-help" style="margin-left: 10px;">
                      <i class="fa fa-question-circle" aria-hidden="true"></i>
                      <span class="sch-help"><p>Technician can see this in app. Additional job instructions for technician go here.</p></span>
                    </a></label>
                    <div class="form-group">
                      <textarea ng-blur="saveFilterLocalTemplate()" class="form-control" ng-model="oneJobModel.job.instruction" name=""></textarea>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-12">
                    <label>Office Notes <a href="javascript:void(0)" class="icon-required checklist-help" style="margin-left: 10px;">
                      <i class="fa fa-question-circle" aria-hidden="true"></i>
                      <span class="sch-help"><p>Technician can't see this. Customer can't see this.</p></span>
                    </a></label>
                    <div class="form-group">
                      <textarea ng-blur="saveFilterLocalTemplate()" class="form-control" ng-model="oneJobModel.job.note" name="">{{oneJobModel.job.note}}</textarea>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-12">
                    <div class="product-add-new-form-top">
                      <label class="ooj-on-equipment-popup">Products & Services</label>
                      <a class="btn" ng-click="addBundleProductSearch(saveOneTimeJob)"> Add New <i class="fa fa-plus-circle "></i></a>
                    </div>
                    <div class="grey-box">
                      <div id="scrollarea"  style="overflow:auto; max-height:300px;">
                      <table class="product-services-list xx" style="width:100%">
                        <thead>
                          <tr>
                            <td style="width:40px" ></td>
                            <td style="width:215px; text-align:left">NAME</td>
                            <td style="width:50px; text-align:left">QTY</td>
                            <td style="width:50px; text-align:left">PRICE</td>
                            <td style="width:50px; text-align:left;">TAX</td>
                            <td style="width:30px;"></td>
                          </tr>
                        </thead>
                        <tbody ng-if="productNoItem || productBundleListNew.length == 0" ng-hide="isApiProcessing">
                          <tr><td colspan="5" style="text-align:center">No item in list</td></tr>
                        </tbody> 
                        <tbody ng-if="bundleSearchForm">
                          <tr>
                            <td colspan="100%" class="bundle-search" style="position: relative;">
                              <div class="product-search-widget-holder --fixed">
                                <div ng-include="'templates/component/search-product-widget.html?ver='+PB_WEB_VERSION" ng-controller="searchProductWidgetController" ng-init="selectProductSearchWidgetArea('equipmentSection',productBundleListNew)"></div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                        <tbody class="bundleSearchResult charge-tax-checkbox-tbody" ng-if="productBundleListNew.length > 0" ng-repeat="productBundleListNewCategory in productBundleListNew">
                          <tr>
                            <td><div class="product-sevices-category" ng-class="productBundleListNewCategory.category"></div></td>
                            <td>{{productBundleListNewCategory.name}}<br><span style="color: #9b9999;font-size: 11px;" ng-if="productBundleListNewCategory.category == 'Product'">part {{productBundleListNewCategory.sku}}</span></td>
                            <td style="text-align:center"><input type="text" ng-disabled="productBundleListNewCategory.category == 'Bundle'" class="form-control input-number form-control-small bundle-qty" ng-model="productBundleListNewCategory.qty" ng-blur="validateBlankQtyInputNegative(productBundleListNewCategory,'qty');calculateBundleCostTemp();saveOneTimeJobLocal()" allow-typing="^[0-9.-]+$" /></td>
                            <td style="text-align:left">{{ negativeRoundUp(productBundleListNewCategory.qty==0 || !productBundleListNewCategory.qty? productBundleListNewCategory.price : (productBundleListNewCategory.price) * (productBundleListNewCategory.qty)) | currency}}</td>
                            <td style="text-align:center"><input type="checkbox" ng-if="productBundleListNewCategory.category != 'Bundle'" ng-checked="productBundleListNewCategory.isChargeTax == 1" ng-model="productBundleListNewCategory.isChargeTax" ng-true-value="1" ng-false-value="0" ng-click="getSubtotalForTax(); chargeTax();saveOneTimeJobLocal()"></td>
                            <td style="width:30px;"><a class="delete-btn" href="javascript:void(0)" ng-click="removeProductToBundle(productBundleListNew, $index);saveOneTimeJobLocal()"><i class="fa fa-times"></i></a></td>
                          </tr>                                            
                          <tr ng-if="productBundleListNewCategory.bundleItemReference" ng-repeat="bundleItem in productBundleListNewCategory.bundleItemReference">
                            <td></td>
                            <td>{{bundleItem.name}}<br><span style="color: #9b9999;font-size: 11px;" ng-if="bundleItem.category == 'Product' && bundleItem.sku">part {{bundleItem.sku}}</span></td>
                            <td style="text-align:center"><input type="text" class="form-control input-number form-control-small bundle-qty" ng-model="bundleItem.qty" ng-blur="validateBlankQtyInputNegative(bundleItem,'qty');calculateBundleCostTemp();saveOneTimeJobLocal()" allow-typing="^[0-9.-]+$" /></td>
                            <td style="text-align:left">{{ negativeRoundUp(bundleItem.qty==0 || !bundleItem.qty? bundleItem.price : (bundleItem.price) * (bundleItem.qty)) | currency}}</td>
                            <td style="text-align:center"><input type="checkbox" ng-checked="bundleItem.isChargeTax == 1" ng-model="bundleItem.isChargeTax" ng-true-value="1" ng-false-value="0" ng-click="getSubtotalForTax();chargeTax();saveOneTimeJobLocal()"></td>
                            <td style="width:30px;"></td>
                          </tr>
                        </tbody>                 
                      </table>
                    </div>
                  </div>
                  </div>
                </div>
                <div class="row billing-section-jobs" ng-if="productBundleListNew.length > 0">
                  <div class="col-md-12">
                    <div ng-if="errorDiscountTemp" class="error-div">Discount amount should not be more than the subtotal</div>
                    <div class="row">
                      <div class="col-md-7">
                        <!--<p>How will the customer be paying? <a href="javascript:void(0)" class="icon-required checklist-help" style="margin-left: 0px;">
                          <i class="fa fa-question-circle" aria-hidden="true"></i>
                          <span class="sch-help">lorem ipsum</span>
                        </a></p>
                        <div class="dropdown select-wrap" ng-class="home">
                          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">{{payOptionValue}} <span class="caret"></span></button>
                          <ul class="dropdown-menu scrollable-menu">                         
                            <li class="" ng-repeat="payOption in payOptionData"><a href="javascript:void(0)" ng-click="selectPayOption(payOption)">{{payOption.option}}</a></li>
                          </ul>
                        </div>-->
                      </div>
                      <div class="col-md-5">
                        <div class="row m-b5">
                          <div class="col-md-6">Subtotal</div>
                          <div class="col-md-6"><strong>{{ currencyTrimmer(trimmedData.subtotal) | currency}}</strong></div>
                        </div>
                        <div class="row m-b5">
                          <div class="col-md-6 p-r0"><small>Taxable Subtotal</small></div>
                          <div class="col-md-6"><strong><small>{{ currencyTrimmer(trimmedData.taxableSubtotal) | currency}}</small></strong></div>
                        </div>
                        <div class="row m-b5">
                          <div class="col-md-6">Discount <span ng-if="discountTitleTemp && discountTitleTemp != '0%' && discountTypeTemp == '%'" style="color:red;">({{discountTitleTemp}})</span></div>
                          <div class="col-md-6">
                            <strong ng-if="discountCalculationTemp">{{ currencyTrimmer(trimmedData.discount) | currency}}</strong> 
                            <a ng-click="addDiscountTemp()" class="btn add-discount-btn" ng-if="!discountCalculationTemp">Add</a>
                            <a class="delete" ng-if="discountCalculationTemp" href="javascript:void(0)" ng-click="removeDiscountTemp();saveOneTimeJobLocal()"><i class="fa fa-times"></i></a>
                          </div>
                        </div>
                        <div class="row m-b5">
                          <div class="col-md-6">Total</div>
                          <div class="col-md-6"><strong>{{ currencyTrimmer(trimmedData.total) | currency}}</strong></div>
                        </div>
                      </div>
                    </div>
    
                  </div>
                </div>
              </div>
              <div class="col-md-6 col-sm-12 col-xs-12 checklist-one-of-job" ng-include="'/templates/component/checklist-item.html?ver='+PB_WEB_VERSION" ng-controller="checklistItemController" ng-init="getChecklistOneOfJob(eqTempelateId)"></div>
            </div>
         </div>
        </div>
         
      </div>
    </div>
    </div>
      
      
      <!-- <div class="row" style="display:none">
        <div class="col-md-12 m-tb20 text-center">
          
          <input type="submit" style="position: inherit !important;" id="saveButton" class="btn btn-primary ng-scope" type="submit" value="SAVE" > 
          <button style="position: inherit !important;" id="cancelButton" class="btn btn-primary ng-scope" type="button" ng-click="closeThisDialog()" ng-if="!productEdit">CLOSE</button>  
        </div>
      </div> -->
    </form>
    </div>
    </div>
    
    </script>
    <script type="text/ng-template" id="addDiscountTemp.html" >
      <div class="modal-box modal-box-v2 common-popup add-tax-popup">
       <div class="popup-header">
         <span class="heading ">Add Discount</span>
         <div class="popup-close" ng-click="closeTaxJobTemp()"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
       </div>
       <div class="add-tax-popup-body">
          <div class="row">
                  <div class="col-md-5">
                    <input 
                    class="form-control small-input input-number discount-value" 
                    mgminmax-validator 
                    type="number" 
                    name="discount-value" 
                    ng-min="0" 
                    ng-model="discountValueTemp"
                    ng-max="discountTypeTemp == '%' ? 100 : 9999999" 
                    required 
                    allow-typing="^[0-9. ]+$"
                    ng-keyup="showDiscountValueTemp(discountValueTemp)"
                    />   
                        
                  </div>
                  <div class="col-md-2 text-center p-l0">
                      <div class="dropdown select-wrap label-dropdown discount-type">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                            <b>{{discountTypeTemp}}</b>
                        <span class="caret"></span></button>
                        <ul class="dropdown-menu scrollable-menu">
                            <li ng-click="updateDiscountTypeTemp('%')" ng-if="discountTypeTemp!='%'"><a href="javascript:void(0)">%</a></li>
                            <li ng-click="updateDiscountTypeTemp('$')" ng-if="discountTypeTemp!='$'"><a href="javascript:void(0)">$</a></li>
                        </ul>
                      </div>
                  </div>
                  <div class="col-md-3 text-center p-l0">
                    <span class="tax-value" ng-if="discountCalculationTemp"> {{ currencyTrimmer(discountCalculationTemp) | currency }}</span>
                  </div>
                  <div class="col-md-2 p-l0">
                      <div class="text-right h-2x">
                          <button class="btn" type="button" ng-disabled="!discountValueTemp" ng-click="addTaxJobTemp();saveOneTimeJobLocal()">Save</button>
                      </div>
                  </div>
          </div>
       </div>
    </div>
    </script>
    <script type="text/ng-template" id="jobActivitySchedulePopup.html">
      <div class="dataTables_wrapper modal-box picture-videos-popup" ng-init="getCustomerJobAuditLogs()">
        <div class="dataTables_wrapper customer" style="padding:5px" >
          <div ng-if="isApiProcessing" class="transparent-bg-fixed"></div>
           <div class="spinner" ng-if="isProcessing" style="border:none; position: fixed;">
            <div class="spinner-item">
             <div class="spinner-animation"><img border="0" src="resources/images/spinner.gif" /></div>
            </div>
           </div>
            <success message="{{successMsg3}}" ng-if="successMsg3"></success>
            <error message="{{error3}}" ng-if="error3"></error>
            
            <div class="popup-header" style="text-align: center;color: white;">
              <span class="heading"><strong>{{templateNameHeading}} Schedule Activity History</strong></span>
              <div class="popup-close" ng-click="closeThisDialog()" style="float: right"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
            </div>
            <div class="list-box" style="max-height:70vh;" id="scrollarea">
              <table class="row-border hover no-footer dataTable" width="100%">
                  <thead>
                      <tr>
                          <!-- <th style="width:2% !important">Action</th> -->
                          <th style="width:15% !important">Details</th>
                      </tr>
                  </thead>
                  <tbody dt-rows="" ng-class-even="'even'" ng-class-odd="'odd'" ng-repeat="routeAuditLogs in routeAuditLogsList track by $index">
                    <tr>
                        <td colspan="4" style="background:#edf0f5; height: 10px; padding: 0"></td>
                    </tr>
                    <tr class="even">
                        <!-- <td class="border-top2 border-bottom2">
                            <div class="customer-add">{{routeAuditLogs.action}}</div>
                        </td> -->
                        <td class="border-top2 border-bottom2">
                            <div class="customer-add">
                              {{routeAuditLogs.firstName}} {{routeAuditLogs.lastName}} - {{routeAuditLogs.createTime | date:"MM/dd/yy"}} at {{routeAuditLogs.createTime | date:"h:mm a"}} - {{ routeAuditLogs.message  }} 
                            </div>
                        </td>                      
                    </tr>
                </tbody>
                  <tbody ng-if="routeAuditLogsList.length == 0">
                    <tr>                  
                      <td colspan="100%" class="no-record-found-reports-table">
                        <div>
                          No audit logs found
                        </div>
                      </td>                 
                    </tr>
                  </tbody>
              </table>
              <div class="paging-warp container-fluid" ng-show="routeAuditLogsList.length != 0">
                <div class="row p-t10" ng-class="{ 'align-footer-table' : isReportListingPage}">
                  <div class="text-left p-l20 p-t10 record-text-inv" ng-class="{ 'col-md-4' : !isReportListingPage, 'col-md-6' : isReportListingPage}" style="position: relative; top: 32px;" >
                      Showing 
                      {{routeAuditLogsList.length ? (pageObj.totalPageInv == pageObj.pageInv ? (pageObj.totalRecordInv-routeAuditLogsList.length)+1 : (pageObj.pageInv > 1 ? ((pageObj.pageInv-1)*routeAuditLogsList.length)+1 : 1)) : 0 }} 
                      to 
                      {{ routeAuditLogsList.length ? (pageObj.totalPageInv == pageObj.pageInv ? pageObj.totalRecordInv : pageObj.pageInv*routeAuditLogsList.length) : 0 }}  
                      of 
                      {{pageObj.totalRecordInv}}             
                  </div>
                
                  <div class="col-md-12">
                    <div class="pagination m-t0">                  
                        <paging
                        page="pageObj.pageInv" page-size="pageObj.limitInv" total="pageObj.totalRecordInv" text-first="First"
                        text-last="Last" text-next="Next" text-prev="Prev"
                        paging-action="goToCustomerListPage(page)"
                        show-prev-next="true" show-first-last="true"> </paging>         
                    </div>
                  </div>
                </div>
              </div>
          </div>
        </div>
      </div> 
   </script>
   <script type="text/ng-template" id="removeCleanHistoryConfirm.html" >
  <div class="dataTables_wrapper modal-box picture-videos-popup" style="width:400px; ">
    <div class="popup-header">
      <div class="h-1-5x b white text-center">Confirm</div>    
    </div>
     <div class="popup-body text-center">
       <div class="row-container">
         <div><label>Are you sure you want to delete history?</label></div>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">CANCEL</button>&nbsp;
           <button class="add-button" type="submit" ng-click="confirmCleanHistoryAction(cleanHistoryObj, index);closeThisDialog()">OK</button>
         </div>
       </div>
     </div>
 
  </div>
 </script>
 <script type="text/ng-template" id="unlinkPodIdConfirm.html" >
  <div class="dataTables_wrapper modal-box picture-videos-popup" style="width:400px; ">
    <div class="popup-header">
      <div class="h-1-5x b white text-center">Confirm</div>      
    </div>
     <div class="popup-body text-center">
       <div class="row-container">
         <div><label>Are you sure you want to unlink device?</label></div>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">CANCEL</button>&nbsp;
           <button class="add-button" type="submit" ng-click="removePodId()">confirm</button>
         </div>
       </div>
     </div>
 
  </div>
 </script>