<div class="data-table-grid dashboard">
  <div class="spinner" ng-if="isProcessing">
    <div class="spinner-item">
      <div class="spinner-animation"><img border="0" src="resources/images/spinner.gif" /></div>
    </div>
  </div>
  <success ng-if="success" message="{{success}}"></success>
  <div class="m-t20">
    <div class="fr p-t5 p-b10">
      <div class="grid">
        <div class="fl p-l30">
            <div class="technicians-invite">
              <form name="searchForm" ng-submit="searchCompanyByName(searchKey)" novalidate>
                <div class="confirm-list">
                    <input type="search" placeholder="Company Name" ng-model="searchKey" />
                    <button type="submit">Search</button>
                </div>

                <div class="confirm-list">
                    <a href="javascript:void(0)" ng-click="addCompany('Add')">Add Company</a>
                </div>
              </form>
            </div>
        </div>
      </div>
    </div>
    <div class="dataTables_wrapper companies-table">
      <table  class="row-border hover no-footer dataTable" width="100%" ng-init="getCompanyList()">
        <thead>
          <tr>
            <th>Name</th>
            <th>Techs<br />/Licenses</th>
            <!--<th>Assigned/<br />Total Devices</th>-->
            <th>Price per Tech</th>
            <th class="address-th">Address</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody dt-rows class="" ng-repeat="companyObj in companyList">
          <tr>
            <td colspan="6" class="border-td" style="height: 10px; background: #edf0f5;"></td>
          </tr>

          <tr>
            <td class="border-top2 border-left2">
              <div class="tech-date"><a ui-sref="administrator.company-details({companyId: companyObj.companyId})">{{companyObj.companyName}}</a></div>
            </td>
            <td class="border-top2 border-left2">
              <div class="tech-date">{{companyObj.activeTechnicians.length+" / "+companyObj.technicians.length}}</div>
            </td>
            <!--<td class="border-top2">
              <div class="tech-date">{{companyObj.assignedDevice+" / "+companyObj.totalDevice}}</div>
            </td>-->
            <td class="border-top2" ng-init="initPriceModel($index, companyObj)">
              <form name="priceForm_[$index]" ng-submit="updateTechPrice(priceModel.pricePerTech_[$index], companyObj, $index)" novalidate>
              <input type="text"
              ng-model="priceModel.pricePerTech_[$index]"
              ng-class="{'has-error': priceForm_[$index].$submitted && priceForm_[$index].$invalid || priceForm_[$index].price_[$index].$touched && priceForm_[$index].price_[$index].$invalid}"
              size="5"
              ng-maxlength="5"
              ng-pattern="/^[1-9][0-9]*$/"
              name="price_[$index]"
              ng-value="companyObj.pricePerTech"> <button class="button-link button {{isProcessing || priceModel.pricePerTech_[$index] == companyObj.pricePerTech ? 'disable-link' : 'bt-blue'}}" ng-disabled="isProcessing || priceModel.pricePerTech_[$index] == companyObj.pricePerTech" type="submit">Update</button>
            </form>
            </td>
            <td class="border-top2">
              <div class="tech-date">{{companyObj.address}}</div>
            </td>
<td class="border-top2">
<div class="tech-date">{{companyObj.status ? 'Active' : 'Inactive'}}</div>
</td>
            <td class="border-top2 border-right2" >
              <div>
                <a class="icon-edit" href="javascript:void(0)" ng-click="companyContract(companyObj)" title="Contract">Contract</a>
                <a class="icon-edit" href="javascript:void(0)" ng-click="addCompany('Edit', companyObj, $index)" title="Edit">Edit</a>
                <a class="icon-edit" href="javascript:void(0)" ng-click="changeStatus(companyObj, $index)" title="{{companyObj.status ? 'Deactive' : 'Active'}}">{{companyObj.status ? 'Deactive' : 'Active'}}</a>
              </div>
            </td>
          </tr>
        </tbody>

        <tbody ng-if="companyList.length < 1">
          <tr>
            <td colspan="6" class="border-td" style="height: 10px; background: #edf0f5;"></td>
          </tr>
          <tr>
            <td colspan="6" style="text-align: center; height: 50px;">Sorry, no results found!</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class="dataTables_info" id="dashTable_info" role="status" aria-live="polite">
  Showing {{currentPage}} to {{totalPage > 0 ? totalPage + 1 : 1}} of {{totalRecord}} entries
</div>
<div class="pagination">
  <paging
				page="page" page-size="limit" total="totalRecord" text-first="First"
				text-last="Last" text-next="Next" text-prev="Prev"
				paging-action="changePage(page)"
				show-prev-next="true" show-first-last="true"> </paging>
</div>
<script type="text/ng-template" id="contract.html" >
  <div class="dataTables_wrapper modal-box" style="width: 800px">
    <div class="popup-header">
      <div class="fl h-1-5x b white">{{companyObject.companyName}} Contract</div>
      <div class="popup-close" ng-click="closeThisDialog('Some value')"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
    </div>
    <div class="popup-body text-center">
          <object style="word-wrap: break-word;" data="{{companyContractContent.pdfUrl}}" type="application/pdf" width="100%" height="400">
            <a href="{{companyContractContent.pdfUrl}}">{{companyContractContent.pdfUrl}}</a>
          </object>
    </div>
  </div>
</script>
