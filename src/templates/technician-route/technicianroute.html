<style>
body,html{overflow: auto !important;}
@media (max-width: 767px){
  .datepicker {position: fixed !important;left: 0 !important;right: 0;margin: auto !important;top: 50% !important;transform: translate(0, -50%) !important;width: 260px;box-shadow: 0 0 1px 242px rgb(0 0 0 / 77%) !important;}
}
</style>
<div style="position:relative;" ng-init="updateContainerHeight()" class="rc-class-{{activeDayCount}}">
  <!-- <div id="filterBoxOverlay" ng-click="showFilterBox=false;" ng-show="showFilterBox"></div> -->
  <div class="spinner" ng-if="isProcessing">
    <div class="spinner-item">
      <div class="spinner-animation">
        <img border="0" src="resources/images/spinner.gif" />
      </div>
    </div>
  </div> 
  <div class="route-map-error-msg" style="position:fixed; width: 100%; z-index: 99999; ">
    <success ng-if="routeSuccess" message="{{routeSuccess}}"></success>
    <error ng-if="routeError" message="{{routeError}}"></error>
  </div>
  <div id="rt-header">
    <div class="p-tb14">
      <div class="col-md-4 rt-header-1 rt-header-fx-col-date">
        <div class="disable-overlay" ng-if="addressForNearest != ''"></div>
        <span class="datePicker-wrapper top-date-picker">
          <i class="fa fa-caret-left" ng-class="{'disabled': matchDate()}" aria-hidden="true" ng-click="matchDate() == false && changeDate('prev', selectedRouteDate, true)"></i>
          <span>
            <span class="map-view-datepicker">              
              <text ng-if="!activeDates || activeDates.length == 1">{{ convertStrToDate(selectedRouteDate) | date:'EEE, MMM d, yyyy'}}</text>
              <text ng-if="activeDates && activeDates.length > 1">
                {{activeDates[0] | date:'d'}} - {{activeDates[(activeDates.length-1)] | date:'d MMM, yyyy'}}
              </text>
              <input ng-model="selectedRouteDate" class="datepicker-custom-input" ng-click="clickedOnCalender()" ng-change="changeDate('test', selectedRouteDate, changeDateByArrowDirection)"
                  aria-hidden="true" readonly/>
              <i class="fa fa-calendar"></i>
            </span>
          </span>
          <i class="fa fa-caret-right" aria-hidden="true" ng-click="changeDate('next', selectedRouteDate, true)"></i>
        </span>
        <a class="button button-days button button-one-day" ng-class="activeDayCount==1 ?  'active' : ''" ng-click="activeDayCount==1 ? '' : daySelected(1, false)">1 Day</a>
        <a class="button button-days m-lr10" ng-class="activeDayCount==2 ?  'active' : ''" ng-click="activeDayCount==2 ? '' :daySelected(2, false)">2 Day</a>
        <a class="button button-days" ng-class="activeDayCount==5 ?  'active' : ''" ng-click="activeDayCount==5 ? '' : daySelected(5, false)">Week</a>
      </div>
      <div class="col-md-5 rt-header-2 p-r0 rt-header-fx-col-filter schedule-filter-area">        
        <div class="row">
          <div class="col-md-6 rt-header-2-1 p-r0">
            <div ng-class="showFilterBox ? 'dropdown select-wrap filter-btn open' : 'dropdown select-wrap filter-btn'">
              <button id="statusDropdown" tabindex="1" class="btn" type="button" ng-click="showFilter()">Filter 
                <span ng-if="filters['TECHNICIAN'].length == 0 && filters['JOB_TYPE'].length == 0 && filters['JOB_STATUS'].length == 0 && filters['CUSTOMER_TAG'].length == 0">OFF</span>
                <span style="background-color: #D68227;" ng-if="filters['TECHNICIAN'].length > 0 || filters['JOB_TYPE'].length > 0 || filters['JOB_STATUS'].length > 0 || filters['CUSTOMER_TAG'].length > 0">ON</span>
                <i class="fa fa-sort-desc"></i>
              </button>
              <div class="dropdown-menu dropdown-menu-route-filters scrollable-menu scrollareaCls" id="filterBox">             
                <div class="row">
                  <div class="col-xs-12">
                    <div class="route-filter-template-section">
                      <div class="route-filter-template-row">
                        <div class="route-filter-template-left-area">                          
                          <div class="route-filter-template-actions">
                              <span>View Template</span>
                              <span class="route-template-link delete-link" ng-if="selectedRouteFilterTemplate.id != noneRouteFilterTemplate.id" ng-click="confirmRouteFilterTemplateDelete()">delete</span>
                              <span class="route-template-link" ng-click="confirmRouteFilterTemplateDefault('set')">set as default</span>                              
                          </div>
                        </div>
                        <div class="route-filter-template-right-area"></div>
                      </div>                      
                      <div class="route-filter-template-row">
                        <div class="route-filter-template-left-area">                          
                          <div class="route-filter-template-input-area">
                            <div class="dropdown select-wrap filter-template-group-dropdown">
                              <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" ng-class="{ 'disable-open-dropdown' : (!routeTemplateFilterTemplates)}">
                                  <span class="selected-filter-template-name">
                                    {{selectedRouteFilterTemplate.templateName}}
                                  </span>
                                  <span class="caret" ng-if="!routeTemplateFilterTemplatesFetching"></span>
                                  <span class="filter-template-fetching" ng-if="routeTemplateFilterTemplatesFetching"></span>
                              </button>
                              <ul class="dropdown-menu scrollable-menu scrollareaCls">   
                                  <li class="no-template-exist" ng-if="routeTemplateFilterTemplates.length == 0">
                                    No templates have been saved yet
                                  </li>   
                                  <li ng-if="selectedRouteFilterTemplate.id != noneRouteFilterTemplate.id">
                                      <a href="javascript:void(0)" ng-click="clearFilter()">None</a>
                                  </li>                                                  
                                  <li ng-repeat="template in routeTemplateFilterTemplates" ng-if="selectedRouteFilterTemplate.id != template.id">
                                      <a href="javascript:void(0)" ng-click="setSelecteRouteFilterTemplate(template)">
                                        {{template.templateName}}
                                      </a>
                                  </li>
                              </ul>    
                            </div>
                          </div>
                        </div>
                        <div class="route-filter-template-right-area text-center">
                            <span class="route-template-link" ng-class="{ 'disabled' : noRouteFilterSelected() }" ng-click="openNewRouteFilterTemplateForm()">save selections below as a new view</span>
                        </div>
                      </div>                      
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="dropdown-menu-items">
                      <h3>Technicians</h3>    
                                    
                      <ul class="colored-scroll-bar" ng-show="!routeFilterLoading && routesFilterList.techList.length > 0">
                        <li ng-class="filters['TECHNICIAN'].indexOf(route.techId) != -1 ? 'selected-filter' : ''" ng-click="filterRouteResult('TECHNICIAN', route.techId)" ng-repeat="route in routesFilterList.techList">
                          <a href="">
                              <span ng-class="filters['TECHNICIAN'].indexOf(route.techId) != -1 ? 'short-name active' : 'short-name'">{{route.techFirstname ? (route.techFirstname | convertToInitial: route.techLastname) : '?'}}</span>
                              <span ng-if="route.userImage && route.userImage != ''" class="short-name filter-tech-image" style="background-image: url({{route.userImage}})"></span> 
                              {{route.techFirstname}} {{route.techLastname}} 
                              <i ng-show="filters['TECHNICIAN'].indexOf(route.techId) != -1" class="fa fa-filter filer-icon"></i>
                            </a>
                        </li>
                        <li ng-class="filters['TECHNICIAN'].indexOf(route.techId) != -1 ? 'selected-filter selected-filter-grey' : ''" ng-click="filterRouteResult('TECHNICIAN', route.techId)" ng-if="
                          filters['TECHNICIAN'].indexOf(route.techId) != -1 && 
                          defaultRouteFilterTemplate && 
                          defaultRouteFilterTemplate.techFilterData && 
                          defaultRouteFilterTemplate.techFilterData.length > 0 &&
                          isTechnicianAlreadyShowing(route) == -1
                          " ng-repeat="route in defaultRouteFilterTemplate.techFilterData">
                          <a href="">
                            <span ng-class="filters['TECHNICIAN'].indexOf(route.techId) != -1 ? 'short-name active' : 'short-name'">{{route.techFirstname ? (route.techFirstname | convertToInitial: route.techLastname) : '?'}}</span>
                            <span ng-if="route.userImage && route.userImage != ''" class="short-name filter-tech-image" style="background-image: url({{route.userImage}})"></span>
                            {{route.techFirstname}} {{route.techLastname}} 
                            <i ng-show="filters['TECHNICIAN'].indexOf(route.techId) != -1" class="fa fa-filter filer-icon"></i></a>                          
                        </li>
                      </ul>
                    </div>    
                    <div ng-if="routeFilterLoading" class="route-filter-techinician-list-loader-holder">
                      <div class="route-filter-techinician-list-loader">
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="dropdown-menu-items" ng-show="routesFilterList.jobType.length > 0">
                      <h3>Job Types</h3>
                      <ul>
                        <li ng-class="filters['JOB_TYPE'].indexOf(jobType.id) != -1 ? 'selected-filter' : ''" ng-click="filterRouteResult('JOB_TYPE', jobType.id)" ng-repeat="jobType in routesFilterList.jobType"><a href=""><span ng-class="'jobtype-icon white-icon colorBox_'+jobType.id"></span>{{jobType.name}} <i ng-show="filters['JOB_TYPE'].indexOf(jobType.id) != -1" class="fa fa-filter filer-icon"></i></a></li>
                        
                      </ul>
                    </div>   
                    <div class="dropdown-menu-items" ng-show="routesFilterList.jobStatus.length > 0">
                      <h3>Status</h3>
                      <ul>
                        <li ng-class="filters['JOB_STATUS'].indexOf(jobStatus.id) != -1 ? 'selected-filter' : ''" ng-click="filterRouteResult('JOB_STATUS', jobStatus.id)" ng-repeat="jobStatus in routesFilterList.jobStatus"><a href=""><i ng-class="jobStatus.id == 1 ? 'fa fa-square-o status-icon blue-icon' : 'fa status-icon blue-icon fa fa-'+{{jobStatus.id}}" ></i> {{jobStatus.statusName}} <i ng-show="filters['JOB_STATUS'].indexOf(jobStatus.id) != -1" class="fa fa-filter filer-icon"></i></a></li>
                        
                      </ul>
                    </div>  
                    <div class="dropdown-menu-items" >
                      <div class="customer-tag-filter">
                        <h3>Customer Tags</h3>
                        <div class="route-cutomer-tag-filter" ng-class="{ 'active' : isCustomerTagListShown }" click-outside="toggleCustomerTagList('close')">                        
                          <div class="customer-tag-search {{ (filteredTags().length == 0 && searchTextTag == '') ? 'customer-tag-search-mb-0' : ''}}">
                            <i class="fa fa-search"></i>
                            <input type="text" class="form-control" id="customerTagSearchRoute" ng-model="searchTextTag" ng-focus="toggleCustomerTagList('open')">                          
                          </div>                           
                          <div class="customer-tags-list scrollareaCls" ng-if="isCustomerTagListShown">
                            <div ng-if="filteredTags().length == 0 && searchTextTag != ''" class="text-center">
                              No Customer Tags Found
                            </div>
                            <ul ng-if="filteredTags().length > 0">
                              <li ng-repeat="tag in filteredTags()" ng-click="addTagTofilter(tag)">
                                {{tag}}
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="route-customer-tag-filter-selected scrollareaCls" ng-if="selectedCustomerTags && selectedCustomerTags.length > 0">
                          <ul>
                            <li ng-repeat="tag in selectedCustomerTags">
                              <span>{{tag}}</span>
                              <i ng-click="removeTagFromFilter(tag)">&times;</i>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    <div class="dropdown-menu-items" >
                        <div class="apply-to-unscheduled">
                          <span>Apply to Unscheduled</span>                          
                          <a href="javascript:void(0)" class="icon-required customer-subdomain-help icon-required-tt-aligned">
                            <i class="fa fa-question-circle" aria-hidden="true"></i>
                            <span>Selected view filters will also be applied to the Unscheduled pane in the top right corner</span>
                          </a>
                          <label class="small switch" ng-click="toggleFilterApplyToUnscheduled(!isFilterApplyingToUnscheduleSection)">
                            <span ng-class="{'active' : isFilterApplyingToUnscheduleSection }" class="slider round"></span>
                          </label>
                        </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <button ng-click="clearFilter()" ng-if="filters['TECHNICIAN'].length > 0 || filters['JOB_TYPE'].length > 0 || filters['JOB_STATUS'].length > 0 || filters['CUSTOMER_TAG'].length > 0" class="btn clear-btn">Clear All</button>
          </div>
          <div class="col-md-6 rt-header-2-2 text-right">
            <button class="button button-blue-tiny" ng-click="checkDaysForRoutePopup()">NEW ROUTE</button> <span class="rc-header-link-devider">|</span>
            <button class="button button-blue-tiny hide-all-toggle-btn"  ng-class="{ 'disabled' : hideAllBtnStatusChecker(isRouteLoading ? isRouteLoading : []) }" ng-click="hideShowAllRoute()">{{isHideAllRoute ? 'Show All' : 'Hide All'}}</button>
            <button ng-disabled="!isRouteExpand" class="button button-blue-tiny" ng-click="collapsedAll()">Collapse All</button>      
            <a href="javascript:void(0)" class="polygon-icon map-zoom" ng-class="!isProcessingDateChange && !isPastDate  ? 'active' : ''" ng-click="!isProcessingDateChange && !isPastDate && resetMapZoom()" 
                    title="Zoom to fit markers">
              <img src="resources/images/map-zoom-icon.png" />
            </a>
            <a href="javascript:void(0)" class="polygon-icon" ng-class="addSelection && !isPastDate ? 'active' : ''" ng-click="!disablePolygonIcon && !isPastDate && addCircle() " 
              title="Click icon and then click section on the map to be grouped">
              <img src="resources/images/polygon-icon.png" />
            </a>            
          </div>
        </div>
        
      </div>
      <div class="col-md-3 rt-header-3 p-tb14">
        <div class="container drop-map-info"  ng-if="isCircle || addressForNearest != ''">
          <div class="row" style="display: flex;  align-items: center;height: 100%;">
            <div class="col-md-12">
              <div class="row" style="display:flex; justify-content:space-around">
                <div class="col">
                  <div class="top-marker-detail" ng-if="isCircle">
                    <span class="property-count">
                      <i class="fa fa-map-marker"></i>{{propertyCount}} locations</span>
                    <span class="work-time">
                      <i class="fa fa-clock-o"></i>{{timePerVisit}} hours work time</span>
                    <span class="payroll">
                      <i class="fa fa-credit-card"></i>${{techPayPerVisit}} payroll</span>
                  </div>
                </div>
                <div class="col">
                  <div ng-if="addressForNearest != ''" class="text-center nearest-location-bar">Showing nearest
                    <input type="text" valid-number value="" maxlength="3" ng-model="nearestLocationLimitModel"
                      ng-keyup="nearestLimitChange(nearestLocationLimitModel)" /> properties to {{addressForNearest}}
                    <i class="fa fa-times-circle" ng-click="clearNearestLocation()"></i>
                  </div>
                </div>
              </div>
            </div>
            <!--div class="col-md-2 text-right" style="padding-right: 1rem">
              <button class="button button-blue-small" ng-click="back()">CLOSE</button>
            </div-->
          </div>
        </div>

        <div class="unshceduled">
          <div class="show-add-icon-header" ng-include="'/templates/layout/header.html?ver='+PB_WEB_VERSION"></div> 
          <div style="display:inline-block; cursor:pointer;font-size: 15px;" class="unshceduled-bar" ng-click="(notRoutedAddressList.length > 0  || notRoutedJobList.length > 0) ? expandCollapsed('showAddress', 31): expandCollapsed('showAddress', 31)"><span class="unsch-title">Unscheduled</span>
            <b class="unsch-sub-title p-l10">{{notRoutedAddressListCount ? notRoutedAddressListCount : 0}}</b> Route Stops <b class="unsch-sub-title p-l10">{{notRoutedJobListCount ? notRoutedJobListCount : 0}}</b> Jobs  
          </div>
          <span class="action-icon-wrapper">
              <i class="fa fa-eye emptyNotRouted-eye" ng-class="{ 'emptyNotRouted-hidded' : emptyNotRouted[0].isHidden}" aria-hidden="true" ng-click="hideRoute(emptyNotRouted[0], 0, 'notRouted')" title="{{emptyNotRouted[0].isHidden ? 'Show Map Markers' : 'Hide Map Markers'}}"></i>
          <span>

          <div class="routeDropList routeDropList--job-loader" ng-class="{hidden: !showAddress[31], unclickable: unscheduledLoading.nonRoutedAddress || unscheduledLoading.nonRoutedJob }">
            <button class="close-btn" ng-click="(notRoutedAddressList.length > 0  || notRoutedJobList.length > 0) ? expandCollapsed('showAddress', 31): expandCollapsed('showAddress', 31)"><i class="fa fa-times" aria-hidden="true"></i></button>
            <div class="mobile-tab">
              <ul>
                <li ng-click="showRouteStops()" ng-class="showRouteStopsClass ? 'active' : ''">Route Stops</li>
                <li ng-click="showOneTimeJobs()" ng-class="showOneTimeJobsClass ? 'active' : ''">One Time Jobs</li>
              </ul>
            </div>
            <div class="row row-eq-height">
              <div class="col-md-6 addreddList" ui-tree="routeSortableOptions" ng-class="showRouteStopsClass ? 'active' : ''">
                <ul class="rt-route-list not-routed-section" ui-tree-nodes ng-model="notRoutedBox">
                  <li><b style="margin:10px 0 0 10px;">Route Stops</b>
                    <a href="javascript:void(0)" class="icon-required blue-down-tooltip">
                      <i class="fa fa-question-circle" aria-hidden="true"></i>
                      <span class="sch-help"><p>Any property with an active route schedule that hasn't been assigned to a route will appear in this section. You can drag & drop to a route or select and move.</p></span>
                    </a>
                  </li>
                  <!--Route List-->
                  
                  <li ng-repeat="notRoutedItem in notRoutedBox" ui-tree-node ng-class="{'hiddenColor': emptyNotRouted[0].isHidden }" class="route-droppable"
                    data-li-id="0">
                    <div ng-class="{hidden: !showAddress[31]}">
                      <div class="text-right route-action">
                        <button class="button button-blue-tiny" ng-show="selectAddressIdArray.length > 0 && selectedCheckboxRoute == 0 && !isMarkerMove"
                          ng-click="setTechIDForMove('from', 0); checkOpenMoveAddressPopup(0, 'notRouted', $index, selectAddressIdArray)">Move</button>
                          <div class="custom-box-wrapper p-relative">
                            <div class="address-select-all not-routed" ng-show="notRoutedAddressList.length > 0" style="right:23px;">
                              <small style="margin-right:5px;">Select all</small>
                              <div  class="address-checkbox">
                                <input type="checkbox" ng-model="selectedAllAddressModel['_0']" ng-click="selectAllAddressOfRoute('0', '0')" />
                                <span></span>
                              </div>
                            </div>
                          </div>
                      </div>                      
                      <div class="not-routed-address-list colored-scroll-bar">                        
                          <div class="p-t50 text-center" style="padding-top: 100px;" ng-if="notRoutedAddressList.length == 0">No unscheduled route stops</div>
                        <ul class="rt-route-address-wrapper nrj-panel-wrapper" ui-tree-nodes ng-model="notRoutedAddressList" data-type="address" data-route-id="0">
                          <ng-container ng-repeat="address in notRoutedAddressList" ui-tree-node data-type="address-item" data-route-id="0" data-address-id="{{address.addressId}}"  data-curr-day="{{address.currDay}}" data-scroll-container=".bottom-col">
                            <li class="blue-border">
                              <div class="address-box">
                                <div class="new-pick-icon" ui-tree-handle>
                                  <img src="/resources/images/move-icon.png" />
                                </div>
                                <div class="marker-count">
                                  <i ng-show="address.placeholderNo " class="fa fa-map-marker" style="color:#fff; -webkit-text-stroke: 1px black;" aria-hidden="true">
                                    <span style="-webkit-text-stroke: 0px;
                                              color: #000;">{{address.placeholderNo}}</span>
                                    <i class="fa fa-circle" aria-hidden="true" style="-webkit-text-stroke: 1px white;"></i>
                                  </i>
        
                                </div>
                                <div class="address-name">
                                  <a ng-href="{{'/app/customerdetail/'+(address.primaryAddressId ? address.primaryAddressId : address.primaryAddressDetails.addressId)}}"> {{address.displayName}}</a>
        
                                  <span>
                                    <a class="addressLink-to-text" ng-href="{{'/app/locationdetail/'+address.addressId}}">
                                    {{address.address}}
                                    <br />{{address.city}}, {{address.state}} {{address.zipcode}}
                                    </a>
                                  </span>
                                </div>
                                <div class="availability">
                                  <span ng-if="address.currDay">
                                    <strong title="{{address.days | capitalizeDays}}"> {{address.currDay | convertToDaysInitial}}</strong>
                                  </span>
                                  <span ng-show="address.weekFrequency == 2">
                                    <img src="/resources/images/alternate-icon.png" />
                                  </span>
                                  <span ng-show="address.weekFrequency > 2">
                                    <img src="/resources/images/alternate-4-icon.png" />
                                  </span>
                                </div>
        
                                <div class="action-icon-wrapper">
                                  <div class="address-checkbox">
        
                                    <input type="checkbox" ng-model="selectedAddressIdArrayModel[address.addressId+'_'+$index]" ng-click="setOpenRoute(0, address.addressId+'_'+$index, 0)" data-currday="{{address.currDay}}" id="{{address.addressId+'_'+$index}}"
                                    />
                                    <span></span>
                                  </div>
                                </div>
                              </div>
        
                            </li>
                          </ng-container>
                        </ul>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 jobList" ui-tree="routeSortableOptions" ng-class="showOneTimeJobsClass ? 'active' : ''">
                <ul class="rt-route-list not-routed-section"  ui-tree-nodes ng-model="notRoutedJobBox">
                  <li><b style="margin:10px 0 0 10px;">One Time Jobs</b>
                    <a href="javascript:void(0)" class="icon-required blue-down-tooltip">
                      <i class="fa fa-question-circle" aria-hidden="true"></i>
                      <span class="sch-help"><p>All one time jobs that are created will appear here by default. You can drag & drop to a route or select and move to schedule the job. Jobs with completed or closed status will not appear here. Click a type to filter the results.</p></span>
                    </a>
                  </li>
                  <li>
                    <div class="flex job-filter">
                      <div ng-repeat="data in jobType" class="flex filter-job-type">
                        <div class="filter-tag tag-type-{{$index}} jobFilterBtnDisabled-tooltip-parent" ng-click="!jobFilterBtnDisabled[data] ? filterByStatus(data) : null" ng-class="{'disabled': !jobStatus[(data)], 'clickDisabled': jobFilterBtnDisabled[data] }">{{$index == 0 ? jobCount : ($index == 1 ? filterCount : ($index == 2 ? saltCount : ''))}} <span ng-if="jobFilterBtnDisabled[data]" class="jobFilterBtnDisabled-tooltip">Disabled due to current view filter settings</span></div>
                        <div>
                          <div><strong>{{data}}</strong></div>
                          <div class="filter-amount">
                            {{$index == 0 ? jobTotalAmt  : ($index == 1 ? filterTotalAmt  : ($index == 2 ? saltTotalAmt : '')) | currency}}</div>
                        </div>
                      </div>        
                    </div>
                  </li>
                  <!--Route List-->
                  <li ng-repeat="notRoutedItem in notRoutedJobBox" ui-tree-node ng-class="{'hiddenColor': emptyNotRouted[0].isHidden }" class="route-droppable"
                  data-li-id="0">
                    <div ng-class="{hidden: !showAddress[31]}">
                      <div class="custom-box-wrapper p-relative">
                        <div class="address-select-all not-routed" ng-show="notRoutedJobList.length > 0">
                          <button class="button button-blue-tiny" ng-show="selectJobIdArray.length > 0 && selectedJobCheckboxRoute == 0 && !isMarkerMove"
                            ng-click="setTechIDForMove('from', 0); nowMovingFromUnscheduledOneTimeJob(); openMoveAddressPopup(0, 'notRouted', $index, selectJobIdArray)">Move</button>
                          <small style="margin:5px;">Select all</small>
                          <div  class="address-checkbox">
                            <input type="checkbox" ng-model="selectedAllJobModel['_0']" ng-click="selectAllJobOfRoute('0', '0')" />
                            <span></span>
                          </div>
                        </div>
                      </div>
                      <div class="not-routed-job-list colored-scroll-bar">                       
                        <div class="p-t50 text-center" style="padding-top: 100px;" ng-if="notRoutedJobList.length == 0">No unscheduled jobs</div>
                        <ul class="rt-route-address-wrapper joblist-item-wrapper nrj-panel-wrapper"ng-model="notRoutedJobList" ui-tree-nodes data-type="address" data-route-id="0"> 
                          <ng-container ng-repeat="job in notRoutedJobList" ui-tree-node data-scroll-container=".bottom-col" data-type="address-item" data-route-id="0" data-address-id="{{job.addressId}}" data-job-id="{{job.jobId}}" >
                            <li class="blue-border job-type-{{job.jobType}}">
                              <div class="address-box">
                                <div class="address-box-date">{{job.dueDate | date: 'MM/dd/yyyy'}}</div>
                                <div class="new-pick-icon"  ui-tree-handle>
                                  <img src="/resources/images/move-icon.png" />
                                </div>
                                <div class="marker-count">
                                  <i ng-show="job.placeholderNo " class="map-marker" style="color:#fff; -webkit-text-stroke: 1px black;" aria-hidden="true">
                                    <span style="-webkit-text-stroke: 0px;
                                              color: #000;">{{job.placeholderNo}}</span>
                                  </i>
                                </div>
                                <div class="address-name">
                                  <a ng-href="{{'/app/customerdetail/'+(job.primaryAddressId ? job.primaryAddressId : job.primaryAddressDetails.addressId) }}"> {{job.displayName}}</a> 
                                  <span>
                                    <a class="addressLink-to-text" ng-href="{{'/app/locationdetail/'+job.addressId}}">
                                      {{job.address}}
                                    <br />{{job.city}}, {{job.state}} {{job.zipcode}}
                                    </a>
                                  </span>
                                  <div class="job-title">{{job.jobTitle}}</div>
                                </div>
        
                                <div class="action-icon-wrapper">
                                  <div class="job-action-top"><a ng-href="{{'/app/one-time-job/'+job.addressId+'/'+job.jobId}}" class="button button-blue-tiny" style="font-size: 11px; font-weight:600;">VIEW</a>
                                    <span class="address-checkbox">
                                      <input type="checkbox" ng-model="selectedJobIdArrayModel[job.addressId+'-'+job.jobId]" ng-click="setOpenJobRoute(0, job.addressId+'-'+job.jobId, 0)"
                                      />
                                      <span></span>
                                    </span>
                                  </div>
                                  <div class="job-action-bottom">
                                    <div>{{job.period | capitalize}}</div>
                                    <div><i class="fa fa-clock-o" aria-hidden="true" ></i> {{job.duration ? job.duration : '00:00' | duration}}</div>
                                    <div><i class="fa fa-usd" aria-hidden="true" ></i> {{job.totalAmount ? job.totalAmount : '0.00' | currency:""}}</div>
                                  </div>
                                </div>
                              </div>
                            </li>
                          </ng-container>
                        </ul>
                      </div>
                    </div>
                  </li>
                </ul>
              </div>
              
            </div>
            
    

          </div>
        </div>
        <i class="fa fa-bars menu-btn hamburger-btn" ng-class="{'menuOpen': menuOpen }" ng-click="openMenu()"></i>
      </div>
    </div>
  </div>
  <div class="hamburger-menu" ng-class="{'menuOpen': menuOpen }">
    <ul>
      <li><a ui-sref="app.dashboard" title="Alerts">Alerts</a></li>
      <li><a ui-sref="app.technicians" title="Technicians">Technicians</a></li>
      <li><a ui-sref="app.customer" title="Customers">Customers</a></li>          
      <li><a ui-sref="technicianroute" title="Scheduling">Scheduling</a></li>
      <li><a ui-sref="app.products" title="Products & Services">Products & Services</a></li>
      <li ng-if="permissions.canAccessTrucksAndToolsURL == 1"><a ui-sref="app.trucks" title="Trucks & Tools">Trucks & Tools</a></li>
      <li ng-if="permissions.canAccessTrucksAndToolsURL == 0">
        <a class="button icon-required" href="#" style="color: #fff;">Trucks & Tools
          <span class="sch-help" style="bottom: 46px; left: 4px; right: 4px; width: auto;">
            <p>You will need a permission<br/>to view this section</p>
          </span>
        </a>
      </li> 
      <li ng-if="permissions.canAccessInventoryURL == 1"><a ui-sref="app.inventory" title="Inventory">Inventory</a></li>
      <li ng-if="permissions.canAccessInventoryURL == 0">
        <a class="button icon-required" href="#" style="color: #fff;">Inventory
          <span class="sch-help" style="bottom: 46px; left: 4px; right: 4px; width: auto;">
            <p>You will need a permission<br/>to view this section</p>
          </span>
            </a>
      </li>      
      <li><a ui-sref="app.emailcenter" title="Reports">Email Center</a></li>
      <li><a ui-sref="app.reports" title="Reports">Reports</a></li>
    </ul>   
  </div>
  <div id="rt-container" class="rt-row colored-scroll-bar sm route-page" ng-class="{'menuOpen': menuOpen }" style="height:{{containerHeight}}px" >
    <section class="rc-items-view">
      <aside id="rt-sidebar" class="rt-col rt-col-left"  ng-repeat="activeDate in activeDates" >
      <div class="bottom-col colored-scroll-bar">
      <div class="date-data-box-container" ng-controller="dateRoutesListController" ui-tree="routeSortableOptions" ng-include="'/templates/component/date-routes-list.html?ver='+PB_WEB_VERSION" ng-init="getRouteByDate('',true, true, '', '', $index)"></div>
    </div>
    </aside>
    </section>
    <section id="rt-main" class="rt-col rt-col-right">
      <ng-container ng-show="!isPastDate">
        <div class="spinner" ng-if="isProcessingDateChange">
          <div class="spinner-item">
           
          </div>
        </div>
        <google-map param="googleMapArgs"></google-map>
      </ng-container>
      <ng-container ng-show="isPastDate">
        <div class="spinner past-date-overlay-spinner" ng-if="isPastDate">
          <div class="spinner-item" style="font-size: 29px; max-width: 732px; margin: 0 auto;text-align: center; font-weight: bold;">
            Map disabled while viewing past dates. You can move properties to future dates by selecting them and clicking "Move" button. You can also change job status
          </div>
        </div>
        <div class="map-placeholder"></div>
      </ng-container> 
    </section>
  </div>
</div>


<script type="text/ng-template" id="addEditRoute.html">
  <div class="dataTables_wrapper modal-box common-popup add-edit-route-popup">  
    <div ng-if="isApiProcessing" class="transparent-bg-fixed"></div>
    <div class="spinner" ng-if="isProcessing" style="border:none; position: fixed;">
      <div class="spinner-item">
        <div class="spinner-animation"><img border="0" src="resources/images/spinner.gif" /></div>
      </div>
    </div>
    <form class="set-chem-form" name="addEditRouteForm" ng-submit="addEditRouteForm.$valid && saveAddEditRoute(addEditRouteModel)" novalidate>
      <div class="popup-header">
        <span class="heading">{{addEditRouteModel.routeId ? 'Edit' : 'New'}} Route</span>
        <div class="popup-close" ng-click="closeThisDialog('')"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
      </div>      
      <div class="detail-box">
        <div class="grid text-left">
          <div class="col-12-12 p-0">
            <a href="javascript:void(0)" ng-if="selectedScheduler[0].value" ng-click="eraseData()" class="delete-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="15" height="17" viewBox="0 0 15 17">
                <path fill="#34495E" fill-rule="evenodd" d="M11.816 15.622l.665-11.747H2.356l.67 11.706 8.79.041zM7.418 2.04c-.441 0-.848.18-1.155.475h2.309a1.672 1.672 0 0 0-1.154-.475zm6.766.475c.36 0 .652.304.652.68 0 .375-.291.68-.652.68h-.398v.001l-.675 11.787c-.045.741-.614 1.319-1.295 1.319H3.022c-.685 0-1.255-.58-1.298-1.32L1.05 3.877l.001-.001H.652A.666.666 0 0 1 0 3.195c0-.376.292-.68.652-.68h4.032C5.169 1.423 6.225.68 7.419.68c1.192 0 2.248.743 2.733 1.835h4.033zm-9.24 11.97a.664.664 0 0 1-.651-.641L3.86 5.74a.67.67 0 0 1 .614-.716c.357-.026.667.266.687.64l.435 8.104c.02.375-.255.696-.615.717h-.037zm4.91 0a.67.67 0 0 1-.615-.717l.435-8.103c.02-.375.335-.669.686-.642a.67.67 0 0 1 .615.718l-.434 8.103a.664.664 0 0 1-.65.641h-.037zm-2.437 0a.666.666 0 0 1-.652-.68V5.703c0-.375.292-.68.652-.68.361 0 .653.305.653.68v8.104c0 .375-.292.68-.653.68z"></path>
              </svg>
            </a> 
            <div class="text-center" >
              <span class="datePicker-wrapper days"><i class="fa fa-caret-left"  ng-class="{'disabled' : weekDays.length == 1 || addEditRouteModel.isAddresses}" aria-hidden="true" ng-click="!addEditRouteModel.isAddresses && changeWeekdays(daysIndex, 'prev')"></i><span class="days-name noselect">{{weekDays[daysIndex]}}</span><i class="fa fa-caret-right"  ng-class="{'disabled' :weekDays.length == 1 || addEditRouteModel.isAddresses}"  aria-hidden="true" ng-click="!addEditRouteModel.isAddresses && changeWeekdays(daysIndex, 'next')"></i></span>             
            </div>                  
          <input type="text" class="fakeInput" />
            <div class="formGroup">
                <div class="main-title">Name </div>
                <input class="form-control" name="title" ng-model="addEditRouteModel.title" value="{{addEditRouteModel.name}}" maxLength="30"  ng-class="{'has-error': addEditRouteForm.$submitted && addEditRouteForm.title.$invalid || addEditRouteForm.title.$touched && addEditRouteForm.title.$invalid}" tab required  />
                <span class="has-required" ng-if="addEditRouteForm.$submitted && addEditRouteForm.title.$invalid || addEditRouteForm.title.$touched && addEditRouteForm.title.$invalid">Please enter name</span>
            </div>  
            <div class="formGroup">
                <div class="main-title">Color </div>     
                <div class="color-picker" style="position:relative">      
                  <span style="background-color:{{addEditRouteModel.color}};"></span>     
                  <input colorpicker colorpicker-parent="true" colorpicker-size="225" name="color" ng-model="addEditRouteModel.color"  ng-class="{'has-error': addEditRouteForm.$submitted && addEditRouteForm.color.$invalid || addEditRouteForm.color.$touched && addEditRouteForm.color.$invalid}" type="text" class="form-control" pattern="#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?" required />
                </div>
                <span class="has-required" ng-if="addEditRouteForm.$submitted && addEditRouteForm.color.$invalid || addEditRouteForm.color.$touched && addEditRouteForm.color.$invalid">Please choose color</span>
            </div>   
            <div class="text-center p-t10" ng-show="addEditRouteModel.routeId">        
              <button ng-class="{ 'loading': routeDataCheking }" class="add-button delete-route-btn" type="button" ng-click="checkRouteHasJob(addEditRouteModel.routeId, $index)" ><span>DELETE ROUTE</span><i class="delete-route-btn-loader"></i></button>
          </div>
            <div class="text-center p-t20">
                <span class="p-r10"><button class="add-button" type="submit" >SAVE</button></span>
                <button class="add-button" type="button" ng-click="closeThisDialog()">CANCEL</button>
            </div>
          </div>
        </div>
      </div>      
    </form>       
  </div>
</script>

<script type="text/ng-template" id="deleteRouteConfirm.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:400px; ">
    <div class="popup-header">
      <span class="heading">Confirm</span>
      <div class="popup-close" ng-click="closeThisDialog('')"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
    </div>
     <div class="popup-body text-center">
       <div class="row-container">
         <div>
          <label ng-if="canDeleteRoute">Are you sure you want to delete this Route?</label>
          <label ng-if="!canDeleteRoute" style="text-align: left">Properties exist on the route you are trying to delete! If you delete the route, any route stops will be moved to unscheduled section and any jobs that aren't in completed or closed status will be moved to unscheduled section regardless of the date they were scheduled for.<br><br>Do you still want to delete this route? This can't be undone.</label>
        </div>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">CANCEL</button>&nbsp;
           <button ng-if="canDeleteRoute" class="add-button" type="submit" ng-click="deleteRouteConfirmAction()">confirm</button>
           <button ng-if="!canDeleteRoute" class="add-button" style="background-color: red;width: 150px;" type="submit" ng-click="deleteRouteConfirmAction()">DELETE ROUTE</button>
         </div>
       </div>
     </div>
 
  </div>
 </script>

 <script type="text/ng-template" id="addAddressExist.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:500px;">
    <div class="popup-header">
      <span class="heading">Property Already Exists</span>
     
    </div>
     <div class="popup-body">
       <div class="row-container address-exist-popup">
         <div><label>These properties weren't moved because the same property already exists on a route for the date you're trying to move to</label></div>
         <ul ng-if="routeMoveDataExist" id="scrollarea" style="overflow: auto; height: 232px;">
            <li ng-repeat="property in routeMoveDataExist">{{property.customerName}} - <small>{{property.address}}<span ng-if="property.city">, {{property.city}}</span><span ng-if="property.state">, {{property.state}}</span><span ng-if="property.zipcode">, {{property.zipcode}}</span>
              </small>
            </li>
         </ul>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">Got It</button>&nbsp;
         </div>
       </div>
     </div>
 
  </div>
 </script>


<script type="text/ng-template" id="assignTechnician.html">
  <div class="dataTables_wrapper modal-box common-popup technician-list-popup" style="width:400px; ">
      <div ng-if="isApiProcessing" class="transparent-bg-fixed"></div>
      <div class="spinner" ng-if="isProcessing" style="border:none; position: fixed;">
        <div class="spinner-item">
          <div class="spinner-animation"><img border="0" src="resources/images/spinner.gif" /></div>
        </div>
      </div>
    <div class="popup-header">
      <span class="heading">Assign Technician To Route</span>
      <div class="popup-close" ng-click="closeThisDialog('')"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
    </div>
     <div class="popup-body">
       <div class="row-container">
          <div class="formGroup text-center">
            <img src="resources/images/magnifiy.png">           
            <input type="text" ng-model="techSearchBox.techSearchText" placeholder="Search" class="form-control" ng-keyup="searchTech(techSearchBox.techSearchText)">
          </div>
          <ul>
            <li ng-click="technician.id != techId && assignTechnician(0)" ng-class="{'selected':technician.id == techId}">
                <i class="fa fa-check-circle"></i>
                 <div class="image-radius name-initial" >
                  <i class="fa fa-user-circle assign-tech"></i>  
                   </div>
                   <span class="name" style="color:#000">Remove Tech</span>
              </li>
              <hr style="border-color: #ccc;" class="m-tb10" />
           
         </ul>        
         <ul id="scrollarea" style="overflow: auto; height: 283px;">            
           <li ng-repeat="technician in technicianList" ng-click="technician.id != techId && assignTechnician(technician.id, $index)" ng-class="{'selected':technician.id == techId}">
             <i class="fa fa-check-circle"></i>
              <div class="image-radius name-initial" style="background-image:url({{technician.userImage}});background-size: cover;">
                <span ng-show="!technician.userImage">
                    {{technician.firstName | convertToInitial: technician.lastName}}                        
                </span>
                </div>
                <span class="name">  {{technician.firstName}} {{technician.lastName}}</span>
           </li>
         </ul>        
       </div>
     </div>
 
  </div>
 </script>


<script type="text/ng-template" id="moveAddress.html">
  <div class="dataTables_wrapper modal-box common-popup technician-list-popup route-move-popup-schedule" style="width:412px; " ng-click="toolTip = !toolTip">
      <div ng-if="isApiProcessing" class="transparent-bg-fixed"></div>
      <div class="spinner" ng-if="isProcessing" style="border:none; position: fixed;">
        <div class="spinner-item">
          <div class="spinner-animation"><img border="0" src="resources/images/spinner.gif" /></div>
        </div>
      </div>
    <div class="popup-header">
      <span class="heading">Move Jobs</span>
      <div class="popup-close" ng-click="closeThisDialog('')"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
    </div>
     <div class="popup-body {{routeModalDataShownSchedule ? 'routeModalDataShownSchedule' : ''}}">
      <div id="datePickerOptionRoutePopupSchedule" class="datePicker-wrapper-with-date-picker-input-holder {{ isTempMove && moveType != 'notRouted' ? 'datePicker-wrapper-with-date-picker-input-holder-with-toggle' : '' }}"></div>
       <div class="row-container">
          <div class="p-b15 text-center move-option work-progress-body" ng-if="routeId != 0">
              <span ng-if="isTempMove" class="move-label noselect">One Time Move</span>
              <span ng-if="!isTempMove" class="move-label permanent noselect">Permanent Move</span> 
              <span class="move-toolTip noselect" >
                <i class="fa fa-question-circle-o" aria-hidden="true" id="toolTipMoveHelp"></i>
                <span class="tip move-help" >
                    <p><b>One Time Moves</b> are used to make temporary schedule changes. Using this method, a routed location that gets moved to a different route this week will be back on it's original route next week. For example, if a tech has 3 pools they can't finish on Monday and you move those 3 locations to a different route and/or day, you won't have to go back and reassign them to the original route later. It will happen automatically.  (All drag and drop moves are One Time Moves unless dragging to the Not Routed section)</p>
                    
                    <p><b>Permanent Moves</b> are used to permanently reassign a location to a different route and/or day. The location will remain where it is assigned and would need to be manually moved again if desired.  (All moves to/from Not Routed section are Permanent Moves)</p>
                </span>
              </span> 
              <div class="move-toolTip switch-div">
                <label class="switch" ng-click="switchMove(isTempMove)"  >
                  <span ng-class="{'active' : !isTempMove}" class="slider round" id="toolTipMoveToggleBtn"></span>
               </label> 
               <span class="service-level-no-item-help tip" ng-show="showDisableTooltip && toolTipMoveToggleBtn" style="bottom: 30px;"><p>A location you are trying to move is already in one time move status. To move it permanently, please move it back to it's original route/day first</p></span> 
              </div>  
          </div>

         <div class="p-b20 text-center">
            <div class="text-center" ng-if="isTempMove && moveType != 'notRouted'">
                <span class="datePicker-wrapper days datePicker-wrapper-with-date-picker-input" >
                  <i class="fa fa-caret-left"  ng-class="{'disabled' : (weekDaysAvailableForMove.length == 1 && !isTempMove) || matchCurrentDate(selectedTempMoveDate)}" aria-hidden="true" ng-click="changeWeekdaysForMovePopup(daysIndex, 'prev'); "></i>
                  <span class="days-name noselect" style="width: {{(moveType != 'notRouted' ? '257px' : '118px')}};">
                    <div class="datepicker-input-parent">
                      <i>{{weekDaysAvailableForMove[daysIndex]}}, {{weekDaysAvailableForMove[daysIndex] | futureDate: selectedTempMoveDate}}                 
                        <div class="datePicker">                    
                          <input id="datePickerInput" prevent-typing datetimepicker-disable-drop ng-change="changeWeekdaysForMovePopup(daysIndex, 'datepicker')" tabindex="4" type="text" class="form-control" datetimepicker options="datePickerOptionRoutePopupSchedule" ng-model="routeSearchDate" />                
                        </div>
                      </i> 
                    </div>
                  </span>
                  <i class="fa fa-caret-right"  ng-class="{'disabled' :weekDaysAvailableForMove.length == 1 && !isTempMove}"  aria-hidden="true" ng-click="changeWeekdaysForMovePopup(daysIndex, 'next')"></i>
                </span>             
              </div> 


            <div class="text-center" ng-if="moveType != 'notRouted' && !isTempMove">
              <span class="datePicker-wrapper days">
                <i class="fa fa-caret-left"  ng-class="{'disabled' :(weekDaysAvailableForMove.length == 1 || !isTempMove || matchCurrentDate(selectedTempMoveDate)) && helpMessage != 1}" aria-hidden="true" ng-click="changeWeekdaysForMovePopup(daysIndex, 'prev'); "></i>
                <span class="days-name noselect" style="width: {{(moveType != 'notRouted' ? '257px' : '118px')}};">
                {{weekDaysAvailableForMove[daysIndex]}}
                </span>
                <i class="fa fa-caret-right"  ng-class="{'disabled' :(weekDaysAvailableForMove.length == 1 || !isTempMove || matchCurrentDate(selectedTempMoveDate)) && helpMessage != 1}"  aria-hidden="true" ng-click="changeWeekdaysForMovePopup(daysIndex, 'next')"></i>
              </span>             
            </div> 
            
            <div class="text-center" ng-if="moveType == 'notRouted' && !isTempMove">
              <span class="datePicker-wrapper days datePicker-wrapper-with-date-picker-input">
                <i class="fa fa-caret-left"  ng-class="{'disabled' : matchCurrentDate(selectedTempMoveDate) }" aria-hidden="true" ng-click="changeWeekdaysForMovePopup(daysIndex, 'prev'); "></i>
                <span class="days-name noselect" style="width: 257px;">
                  <div class="datepicker-input-parent">
                    <i>{{ (selectedTempMoveDate) | date : 'EEEE, MMMM d, y'}}                 
                      <div class="datePicker">                    
                        <input id="datePickerInput" prevent-typing datetimepicker-disable-drop ng-change="changeWeekdaysForMovePopup(daysIndex, 'datepicker')" tabindex="4" type="text" class="form-control" datetimepicker options="datePickerOptionRoutePopupSchedule" ng-model="routeSearchDate" />                
                      </div>
                    </i> 
                  </div>
                </span>
                <i class="fa fa-caret-right"  aria-hidden="true" ng-click="changeWeekdaysForMovePopup(daysIndex, 'next')"></i>
              </span>             
            </div> 
            <div ng-if="moveType == isTempMove && helpMessage != 1" style="font-size: 11px; color: #ff3838;">{{helpMessage}}</div>
        </div>
       
          <div class="formGroup text-center">
            <img src="resources/images/magnifiy.png">           
            <input type="text" ng-model="routeSearchBox.routeSearchText" placeholder="Route or technician name" class="form-control" ng-keyup="searchRoute(routeSearchBox.routeSearchText)" id="routeSearchInputPopup">
          </div>            
          <div class="tech-list-for-job-move">
          
          <ul>
            <li ng-click="setTechIDForMove('to', 0); 0 != routeId && moveAddressAfter(0)" ng-class="{'selected': 0 == routeId}">
                <i class="fa fa-check-circle"></i>
                 <div class="image-radius name-initial" >
                   <span class="placeholder-not-route-icon">
                                    
                   </span>
                   </div>
                   <span class="name" style="color:#000">Unscheduled</span>
              </li>
              <hr style="border-color: #ccc;" class="m-tb10" />
           
         </ul>            
         <ul class="result-tech-list" id="scrollarea" style="overflow: auto; height: 232px;">  
           <li class="technician-are-loading-li">
            <div class="technician-are-loading">
              <div class="technician-loader-spinner"></div>
              <p>Loading routes</p>
            </div>
           </li>          
           <li class="hidden-on-loading" ng-repeat="route in routesPopupList" ng-click="setTechIDForMove('to', route.technicianId ? route.technicianId : 0); moveAddress(route.id)" ng-class="{'selected': route.id == routeId && canVisibleActiveTechnician(route.canMove) }" >    
              <i class="fa fa-check-circle"></i>
              <div class="image-radius name-initial tech-icon-on-move-popup" style="background-image:url({{route.userImage}}); border-color:{{route.color}}; ">
                <span ng-show="!route.userImage" style="color:{{route.color}}; font-size:{{!route.techFirstname && '24px'}}">
                    {{route.techFirstname ? (route.techFirstname | convertToInitial: route.techLastname) : '?'}}                    
                </span>
              </div>    
              <div>
                <span class="name" style="color:{{route.color}};" >  {{route.title}}</span>
                <span class="name tech-name" >{{route.techFirstname}} {{route.techLastname}} </span>
              </div>
           </li>
         </ul>   
        </div>       
       </div>
     </div>
 
  </div>
 </script>

<script type="text/ng-template" id="startLocation.html">
  <div class="dataTables_wrapper modal-box common-popup startlocation-route-popup">  
    <div ng-if="isApiProcessing" class="transparent-bg-fixed"></div>
    <div class="spinner" ng-if="isProcessing" style="border:none; position: fixed;">
      <div class="spinner-item">
        <div class="spinner-animation"><img border="0" src="resources/images/spinner.gif" /></div>
      </div>
    </div>
    <form class="set-chem-form" name="updateStartLocationForm" ng-submit="updateStartLocationFormIsSubmit = true; updateStartLocationForm.$valid && saveStartLocation(updateStartLocationModel)" novalidate>
      <div class="popup-header">
        <span class="heading">Route Start Location</span>
        <div class="popup-close" ng-click="closeThisDialog('')"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
      </div>      
      <div class="detail-box">
          <div class="row">
            <div class="col-md-12">
              <input autocomplete="off" name="address" class="form-control" ng-model="updateStartLocationModel.address" details="chosenPlaceDetails" googleplace maxlength="150" ng-class="{'has-error': updateStartLocationFormIsSubmit && updateStartLocationForm.address.$invalid}" placeholder="Start Location" type="text"/>
            </div>
          </div>
        <div class="grid text-left">
          <div class="col-12-12 p-0">
            <div class="text-center p-t20">
                <span class="p-r10">
                  <button class="add-button" type="submit" >SAVE</button>
                </span>
                <button class="add-button" type="button" ng-click="closeThisDialog()">CANCEL</button>
            </div>
          </div>
        </div>
      </div>      
    </form>       
  </div>
</script>


<script type="text/ng-template" id="confirmationDrag.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:400px; ">
    <div class="popup-header">
      <span class="heading">Move Job Confirmation</span>
      <div class="popup-close" ng-click="closeThisDialog()"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
    </div>
     <div class="popup-body text-center">
       <div class="row-container">
         <div><label>Are you sure you want to move this Job to {{destName}}?</label></div>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">CANCEL</button>&nbsp;
           <button class="add-button" type="submit" ng-click="confirm()">confirm</button>
         </div>
       </div>
     </div>
 
  </div>
 </script>

<script type="text/ng-template" id="moveError.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:400px; ">
    <div class="popup-header">
      <span class="heading">Move Job</span>
      <div class="popup-close" ng-click="closeThisDialog()"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
    </div>
     <div class="popup-body text-center">
       <div class="row-container">
         <div><label>To drag or move to this route, go back and select the location for the same day as route.</label></div>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">OK</button>
         
         </div>
       </div>
     </div>
 
  </div>
 </script>
 
<script type="text/ng-template" id="moveErrorPastDate.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:400px; ">
    <div class="popup-header">
      <span class="heading">Move Job</span>
      <div class="popup-close" ng-click="closeThisDialog()"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
    </div>
     <div class="popup-body text-center">
       <div class="row-container">
         <div><label>Jobs can't be moved to dates in the past.</label></div>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">OK</button>
         
         </div>
       </div>
     </div>
 
  </div>
 </script>
 <script type="text/ng-template" id="movingDayRestrictedPropFromUnscheduledToRoute_moveError.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:500px; ">
    <div class="popup-header">
      <span class="heading">Move Job</span>
      <div class="popup-close" ng-click="closeThisDialog()"><i class="fa fa-times-circle" aria-hidden="true"></i></div>
    </div>
     <div class="popup-body text-left">
       <div class="row-container">
         <div><label>This property has a day restriction set for {{movingDayRestrictedPropFromUnscheduledToRouteData.selectedDay}} and you are trying to move it to a route on {{movingDayRestrictedPropFromUnscheduledToRouteData.destDay}}. <br>Please make sure you are moving this to the correct day or you can change the day restriction setting on the route schedule which is accessed from the property page.</label></div>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">OK</button>
         
         </div>
       </div>
     </div>
 
  </div>
 </script>
 <script type="text/ng-template" id="propertiesAlreadyMoved.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:500px;">
    <div class="popup-header">
      <span class="heading">Property Already Moved</span>
     
    </div>
     <div class="popup-body">
       <div class="row-container address-exist-popup">
         <div><label>These properties weren't moved because these properties are already moved to another route</label></div>
         <ul ng-if="propertiesAlreadyMovedData" id="scrollarea" style="overflow: auto; height: 232px;">
            <li ng-repeat="property in propertiesAlreadyMovedData">
              {{property.customerName}} - 
              <small>{{property.address}}<span ng-if="property.city">, {{property.city}}</span><span ng-if="property.state">, {{property.state}}</span><span ng-if="property.zipcode">, {{property.zipcode}}</span> </small>
              is already 
              <span ng-if="property.isTempMoved">temporary </span>
              <span ng-if="!property.isTempMoved">permanent </span>
              moved to {{property.routeName}}
            </li>
         </ul>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">Got It</button>&nbsp;
         </div>
       </div>
     </div>
 
  </div>
 </script>
 <script type="text/ng-template" id="endDatePassed.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:500px;">
    <div class="popup-header">
      <span class="heading">Properties not moved</span>     
    </div>
     <div class="popup-body">
       <div class="row-container address-exist-popup">
         <div><label>These properties were not moved because the moved date is greater than their Route Schedule Ends On date</label></div>
         <ul ng-if="endDatePassedData" id="scrollarea" style="overflow: auto; height: 232px;">
            <li ng-repeat="property in endDatePassedData">
              {{property.customerName}} - 
              <small>{{property.address}}<span ng-if="property.city">, {{property.city}}</span><span ng-if="property.state">, {{property.state}}</span><span ng-if="property.zipcode">, {{property.zipcode}}</span> </small>
            </li>
         </ul>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">Got It</button>&nbsp;
         </div>
       </div>
     </div>
 
  </div>
 </script>
 <script type="text/ng-template" id="routeSkipped.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:500px;">
    <div class="popup-header">
      <span class="heading">Properties not moved</span>     
    </div>
     <div class="popup-body">
       <div class="row-container address-exist-popup">
         <div><label>Following route visit(s) you're trying to move is currently set to be skipped. Please undo the skip setting and try again.</label></div>
         <ul ng-if="routeSkippedData" id="scrollarea" style="overflow: auto; height: 232px;">
            <li ng-repeat="property in routeSkippedData">
              {{property.customerName}} - 
              <small>{{property.address}}<span ng-if="property.city">, {{property.city}}</span><span ng-if="property.state">, {{property.state}}</span><span ng-if="property.zipcode">, {{property.zipcode}}</span> </small>
            </li>
         </ul>
         <br />
         <div class="set-chem-button m-b20" style="text-align: center;">
           <button class="add-button" type="submit" ng-click="closeThisDialog()">Got It</button>&nbsp;
         </div>
       </div>
     </div>
 
  </div>
 </script>
<script type="text/ng-template" id="newRouteFilterTemplateNameModal.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:500px;">
    <div class="popup-header">
      <span class="heading">Save new view template</span>     
    </div>
     <div class="popup-body">
      <div class="spinner" ng-if="routeTemplateFilterTemplatesUpdating">
        <div class="spinner-item">
          <div class="spinner-animation">
            <img border="0" src="resources/images/spinner.gif" />
          </div>
        </div>
      </div> 
       <div class="row">
        <div class="col-xs-12">
          <success ng-if="templateFilterSuccess" message="{{templateFilterSuccess}}"></success>
          <error ng-if="templateFilterError" message="{{templateFilterError}}"></error>
          <form name="saveFilterTemplateForm" autocomplete="off" ng-submit="saveFilterTemplateForm.$valid && createNewRouteFilterTemplate()" novalidate>          
            <div class="form-group">                        
                <input 
                    type="text" 
                    autocomplete="off" 
                    class="form-control" 
                    ng-model="saveFilterTemplateModel.templateName" 
                    placeholder="Enter Template Name" 
                    name="templateName" 
                    ng-maxlength="100"                    
                    ng-class="{'has-error': saveFilterTemplateForm.$submitted && saveFilterTemplateForm.templateName.$invalid || saveFilterTemplateForm.templateName.$touched && saveFilterTemplateForm.templateName.$invalid}"
                    required                         
                />
            </div> 
            <div class="text-center">
              <button class="add-button" ng-click="closeThisDialog()" type="button">CANCEL</button>
              <button class="add-button" type="submit" ng-click="!routeTemplateFilterTemplatesUpdating ? saveFilterTemplateForm.submitAttempt=true : null" >SAVE</button>
            </div>
          </form> 
        </div>
       </div>
     </div>
  </div>
</script>
<script type="text/ng-template" id="deleteRouteFilterTemplateConfirmModal.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:400px;">
    <div class="popup-header">
      <span class="heading">Confirm</span>     
    </div>
     <div class="popup-body">
      <div class="spinner" ng-if="routeTemplateFilterTemplatesUpdating">
        <div class="spinner-item">
          <div class="spinner-animation">
            <img border="0" src="resources/images/spinner.gif" />
          </div>
        </div>
      </div> 
       <div class="row">
        <div class="col-xs-12">
          <success ng-if="templateFilterSuccess" message="{{templateFilterSuccess}}"></success>
          <error ng-if="templateFilterError" message="{{templateFilterError}}"></error>
          <div class="text-center m-b20">
            <label style="font-weight: normal">Are you sure you want to delete the view template named <b>{{selectedRouteFilterTemplate.templateName}}</b> ?</label>
          </div>
          <div class="text-center m-b10">
            <button class="add-button" ng-click="closeThisDialog()" type="button">CANCEL</button>
            <button class="add-button redBtn" type="button" ng-click="!routeTemplateFilterTemplatesUpdating ? deleteRouteFilterTemplate() : null" >DELETE</button>
          </div>
        </div>
       </div>
     </div>
  </div>
</script>
<script type="text/ng-template" id="defaultRouteFilterTemplateConfirmModal.html">
  <div class="dataTables_wrapper modal-box common-popup" style="width:400px;">
    <div class="popup-header">
      <span class="heading">Confirm</span>     
    </div>
     <div class="popup-body">
      <div class="spinner" ng-if="routeTemplateFilterTemplatesUpdating">
        <div class="spinner-item">
          <div class="spinner-animation">
            <img border="0" src="resources/images/spinner.gif" />
          </div>
        </div>
      </div> 
       <div class="row">
        <div class="col-xs-12">
          <success ng-if="templateFilterSuccess" message="{{templateFilterSuccess}}"></success>
          <error ng-if="templateFilterError" message="{{templateFilterError}}"></error>
          <div class="text-center m-b20">
            <label style="font-weight: normal">Are you sure you want to set <b>{{selectedRouteFilterTemplate.templateName}}</b> as the default view template?</label>
          </div>
          <div class="text-center m-b10">
            <button class="add-button" ng-click="closeThisDialog()" type="button">CANCEL</button>
            <button class="add-button" type="button" ng-click="!routeTemplateFilterTemplatesUpdating ? changeDefaultRouteFilterTemplate() : null" >CONFIRM</button>
          </div>
        </div>
       </div>
     </div>
  </div>
</script>
<div id="markerPlaceHolder"></div>